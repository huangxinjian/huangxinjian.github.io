<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL ç´¢å¼•è¯¦ç»†åˆ†æ | HuangXinJian</title>
    <meta name="description" content="If you learn, learn deeply please!">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/H.png">
    
    <link rel="preload" href="/assets/css/0.styles.77838d5e.css" as="style"><link rel="preload" href="/assets/js/app.78cba7d9.js" as="script"><link rel="preload" href="/assets/js/2.b97de27f.js" as="script"><link rel="preload" href="/assets/js/11.fc6bddf2.js" as="script"><link rel="prefetch" href="/assets/js/10.5a39f9cf.js"><link rel="prefetch" href="/assets/js/12.da1eaab3.js"><link rel="prefetch" href="/assets/js/13.3e791f4e.js"><link rel="prefetch" href="/assets/js/14.5953a388.js"><link rel="prefetch" href="/assets/js/15.b9e792e3.js"><link rel="prefetch" href="/assets/js/16.14be3228.js"><link rel="prefetch" href="/assets/js/17.d8c48abe.js"><link rel="prefetch" href="/assets/js/18.c1171d86.js"><link rel="prefetch" href="/assets/js/19.687638f3.js"><link rel="prefetch" href="/assets/js/20.dbb7c712.js"><link rel="prefetch" href="/assets/js/21.fcac9d7b.js"><link rel="prefetch" href="/assets/js/22.05c89a82.js"><link rel="prefetch" href="/assets/js/23.6f455ef9.js"><link rel="prefetch" href="/assets/js/24.a5f5dd42.js"><link rel="prefetch" href="/assets/js/25.ddacf5f1.js"><link rel="prefetch" href="/assets/js/26.1dbabccd.js"><link rel="prefetch" href="/assets/js/27.4d3ddddd.js"><link rel="prefetch" href="/assets/js/28.aca93b2e.js"><link rel="prefetch" href="/assets/js/29.4e592fcf.js"><link rel="prefetch" href="/assets/js/3.8c3b122e.js"><link rel="prefetch" href="/assets/js/30.07e05cf0.js"><link rel="prefetch" href="/assets/js/31.4bc393d7.js"><link rel="prefetch" href="/assets/js/32.5bed9ede.js"><link rel="prefetch" href="/assets/js/33.b1d61159.js"><link rel="prefetch" href="/assets/js/34.27c7f1f1.js"><link rel="prefetch" href="/assets/js/35.17c92a26.js"><link rel="prefetch" href="/assets/js/36.91a5ecf5.js"><link rel="prefetch" href="/assets/js/37.88c250af.js"><link rel="prefetch" href="/assets/js/38.6d72295b.js"><link rel="prefetch" href="/assets/js/39.0e585af1.js"><link rel="prefetch" href="/assets/js/4.ff5f2a88.js"><link rel="prefetch" href="/assets/js/40.80a7f1c2.js"><link rel="prefetch" href="/assets/js/41.defa3efa.js"><link rel="prefetch" href="/assets/js/42.70857ada.js"><link rel="prefetch" href="/assets/js/5.68065b24.js"><link rel="prefetch" href="/assets/js/6.bb2aa06c.js"><link rel="prefetch" href="/assets/js/7.f469350c.js"><link rel="prefetch" href="/assets/js/8.37ca51cf.js"><link rel="prefetch" href="/assets/js/9.68f4fa83.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77838d5e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">HuangXinJian</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJS" class="dropdown-title"><span class="title">NodeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nodejs/NodeJSåŸºç¡€/NodeJSä»‹ç».html" class="nav-link">
  NodeJS åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/baseJava/Java ä»‹ç».html" class="nav-link">
  Java åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†å¸ƒå¼" class="dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/distributed/frameworkHistory/æ¶æ„æ¼”å˜å†å².html" class="nav-link">
  åˆ†å¸ƒå¼å­¦ä¹ è·¯çº¿
</a></li><li class="dropdown-item"><!----> <a href="/distributed/registerCenter/" class="nav-link">
  æ³¨å†Œä¸­å¿ƒ
</a></li><li class="dropdown-item"><!----> <a href="/distributed/messageSystem/" class="nav-link">
  æ¶ˆæ¯ç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/distributed/internal/" class="nav-link">
  ç½‘ç»œæ¡†æ¶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å…³ç³»å‹æ•°æ®åº“
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/RDB/MySQL_Learn/MySQLå®‰è£….html" class="nav-link">
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/huangxinjian/huangxinjian.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJS" class="dropdown-title"><span class="title">NodeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nodejs/NodeJSåŸºç¡€/NodeJSä»‹ç».html" class="nav-link">
  NodeJS åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/baseJava/Java ä»‹ç».html" class="nav-link">
  Java åŸºç¡€
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="åˆ†å¸ƒå¼" class="dropdown-title"><span class="title">åˆ†å¸ƒå¼</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/distributed/frameworkHistory/æ¶æ„æ¼”å˜å†å².html" class="nav-link">
  åˆ†å¸ƒå¼å­¦ä¹ è·¯çº¿
</a></li><li class="dropdown-item"><!----> <a href="/distributed/registerCenter/" class="nav-link">
  æ³¨å†Œä¸­å¿ƒ
</a></li><li class="dropdown-item"><!----> <a href="/distributed/messageSystem/" class="nav-link">
  æ¶ˆæ¯ç³»ç»Ÿ
</a></li><li class="dropdown-item"><!----> <a href="/distributed/internal/" class="nav-link">
  ç½‘ç»œæ¡†æ¶
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æ•°æ®åº“" class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          å…³ç³»å‹æ•°æ®åº“
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/RDB/MySQL_Learn/MySQLå®‰è£….html" class="nav-link">
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/huangxinjian/huangxinjian.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MySQL</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/RDB/MySQL_Learn/MySQLå®‰è£….html" class="sidebar-link">MySQL å•æœºå®‰è£…</a></li><li><a href="/database/RDB/MySQL_Learn/MySQLåŸºç¡€è¯­æ³•.html" class="sidebar-link">MySQL åŸºç¡€è¯­æ³•</a></li><li><a href="/database/RDB/MySQL_Learn/MySQLæ¶æ„.html" class="sidebar-link">MySQL æ¶æ„</a></li><li><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•.html" class="sidebar-link">MySQL ç´¢å¼•</a></li><li><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html" class="active sidebar-link">MySQL ç´¢å¼•è¯¦ç»†åˆ†æ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯" class="sidebar-link">ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ç´¢å¼•æ‰§è¡Œè®¡åˆ’" class="sidebar-link">ç´¢å¼•æ‰§è¡Œè®¡åˆ’</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#id" class="sidebar-link">id</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#select-type-é‡è¦" class="sidebar-link">select_type ğŸ’¥ é‡è¦</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#simple" class="sidebar-link">simple</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#primary" class="sidebar-link">primary</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#subquery" class="sidebar-link">subquery</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#dependent-subquery" class="sidebar-link">dependent subquery</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#union" class="sidebar-link">union</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#dependent-union" class="sidebar-link">dependent union</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#union-result" class="sidebar-link">union result</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#derived" class="sidebar-link">derived</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#table" class="sidebar-link">table</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#type-é‡è¦" class="sidebar-link">type ğŸ’¥ é‡è¦</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#system" class="sidebar-link">system</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#const-é‡è¦" class="sidebar-link">const ğŸ‘ é‡è¦</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#eq-ref-é‡è¦" class="sidebar-link">eq_ref ğŸ‘ é‡è¦</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ref-é‡è¦" class="sidebar-link">ref ğŸ‘ é‡è¦</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#fulltext" class="sidebar-link">fulltext</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ref-or-null" class="sidebar-link">refornull</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#unique-subquery" class="sidebar-link">unique_subquery</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#index-subquery" class="sidebar-link">index_subquery</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#range-é‡è¦" class="sidebar-link">range ğŸ’¥ é‡è¦</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#index-é‡è¦" class="sidebar-link">index ğŸ‘ é‡è¦</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#all-é‡è¦" class="sidebar-link">all ğŸ‘ é‡è¦</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#possible-keys" class="sidebar-link">possible keys</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#key" class="sidebar-link">key</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#key-len" class="sidebar-link">key len</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ref" class="sidebar-link">ref</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#rows" class="sidebar-link">rows</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#filtered" class="sidebar-link">filtered</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#extra-é‡è¦" class="sidebar-link">extra ğŸ’¥ é‡è¦</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#no-tables-used" class="sidebar-link">no tables used</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#using-filesort" class="sidebar-link">using filesort</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#using-index" class="sidebar-link">using index</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#using-temporary" class="sidebar-link">using temporary</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#using-where-é‡è¦" class="sidebar-link">using where ğŸ’¥ é‡è¦</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#using-index-condition-é‡è¦" class="sidebar-link">using index condition ğŸ’¥ é‡è¦</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#mysql-ç´¢å¼•å¤±æ•ˆåˆ†æ" class="sidebar-link">MySQL ç´¢å¼•å¤±æ•ˆåˆ†æ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#å…¨å±€åŒ¹é…æˆ‘æœ€çˆ±" class="sidebar-link">å…¨å±€åŒ¹é…æˆ‘æœ€çˆ±</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#æœ€ä½³å·¦å‰ç¼€æ³•åˆ™" class="sidebar-link">æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ä¸è¦åœ¨ç´¢å¼•ä¸Šåšè®¡ç®—" class="sidebar-link">ä¸è¦åœ¨ç´¢å¼•ä¸Šåšè®¡ç®—</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—å¤±æ•ˆ" class="sidebar-link">èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—å¤±æ•ˆ</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•" class="sidebar-link">å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ç´¢å¼•å­—æ®µä¸Šä¸è¦ä½¿ç”¨ä¸ç­‰" class="sidebar-link">ç´¢å¼•å­—æ®µä¸Šä¸è¦ä½¿ç”¨ä¸ç­‰</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ä¸»é”®ç´¢å¼•ä¸Šä¸èƒ½ä½¿ç”¨å¸¦æœ‰-null-çš„åˆ¤æ–­" class="sidebar-link">ä¸»é”®ç´¢å¼•ä¸Šä¸èƒ½ä½¿ç”¨å¸¦æœ‰ null çš„åˆ¤æ–­</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ç´¢å¼•å­—æ®µä½¿ç”¨likeä¸ä»¥é€šé…ç¬¦å¼€å¤´" class="sidebar-link">ç´¢å¼•å­—æ®µä½¿ç”¨likeä¸ä»¥é€šé…ç¬¦å¼€å¤´</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ç´¢å¼•å­—æ®µæ˜¯å­—ç¬¦ä¸²éœ€è¦å¸¦å•å¼•å·" class="sidebar-link">ç´¢å¼•å­—æ®µæ˜¯å­—ç¬¦ä¸²éœ€è¦å¸¦å•å¼•å·</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•è¯¦ç»†åˆ†æ.html#ç´¢å¼•å­—æ®µä¸è¦ä½¿ç”¨or" class="sidebar-link">ç´¢å¼•å­—æ®µä¸è¦ä½¿ç”¨or</a></li></ul></li></ul></li><li><a href="/database/RDB/MySQL_Learn/MySQLé”.html" class="sidebar-link">MySQL é”</a></li><li><a href="/database/RDB/MySQL_Learn/MySQLäº‹åŠ¡.html" class="sidebar-link">MySQL äº‹åŠ¡</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql-ç´¢å¼•è¯¦ç»†åˆ†æ"><a href="#mysql-ç´¢å¼•è¯¦ç»†åˆ†æ" class="header-anchor">#</a> MySQL ç´¢å¼•è¯¦ç»†åˆ†æ</h1> <h2 id="ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯"><a href="#ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯" class="header-anchor">#</a> ç´¢å¼•çš„ä½¿ç”¨åœºæ™¯</h2> <p>é€šå¸¸åœ¨å“ªäº›åœ°æ–¹éœ€è¦å»ºç«‹ç´¢å¼•å‘¢ï¼Ÿæœ‰ä»¥ä¸‹å‡ ä¸ªå‚è€ƒç‚¹ï¼š</p> <ol><li>ä¸»é”®è‡ªåŠ¨å»ºç«‹å”¯ä¸€éç©ºç´¢å¼•</li> <li>å¯¹äºæŸäº›å­—æ®µä¸šåŠ¡æŸ¥è¯¢ååˆ†é¢‘ç¹çš„ï¼Œå¯ä»¥è€ƒè™‘å»ºç«‹ç´¢å¼•</li> <li>åœ¨å¤šè¡¨å…³è”æŸ¥è¯¢ä¸­ï¼Œå…³è”è¡¨ä¸¤è¾¹åº”è¯¥åˆ›å»ºç´¢å¼•ï¼Œå¯¹äº <code>on</code> æ¡ä»¶çš„ä¸¤è¾¹ä¹Ÿåº”è¯¥åˆ›å»ºç´¢å¼•</li> <li>åœ¨æŸ¥è¯¢ä¸­ç”¨äºæ’åºçš„å­—æ®µï¼Œå¯ä»¥è€ƒè™‘åˆ›å»ºç´¢å¼•ï¼Œå› ä¸º <code>B+ Tree</code> æ˜¯æœ‰é¡ºåºçš„</li> <li>ç»Ÿè®¡æŸ¥è¯¢æˆ–åˆ†ç»„æŸ¥è¯¢ï¼Œåº”è¯¥åˆ›å»ºç´¢å¼•</li></ol> <p>å“ªäº›æƒ…å†µä¸‹ä¸éœ€è¦åˆ›å»ºç´¢å¼•å‘¢ï¼Œä¹Ÿå¯ä»¥å‚è€ƒï¼š</p> <ol><li>è¡¨ä¸­è®°å½•è¾ƒå°‘çš„ï¼Œä¸éœ€è¦åˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•ä¹Ÿä¼šå æ®ä¸€å®šçš„å­˜å‚¨ç©ºé—´</li> <li>è¡¨ä¸­çš„è®°å½•éœ€è¦è¿›è¡Œé¢‘ç¹çš„æ›´æ–°çš„ï¼Œä¸é€‚åˆå»ºç«‹ç´¢å¼•ï¼Œè¿™æ ·ä¼šå¢åŠ ç´¢å¼•çš„ç»´æŠ¤æˆæœ¬</li> <li>æŸ¥è¯¢çš„å­—æ®µä½¿ç”¨é¢‘ç‡ä¸é«˜çš„ï¼Œä¸éœ€è¦åˆ›å»ºç´¢å¼•</li></ol> <h2 id="ç´¢å¼•æ‰§è¡Œè®¡åˆ’"><a href="#ç´¢å¼•æ‰§è¡Œè®¡åˆ’" class="header-anchor">#</a> ç´¢å¼•æ‰§è¡Œè®¡åˆ’</h2> <p>MySQL ä¸­æä¾›äº†ä¸€ä¸ª <code>explain</code> çš„å‘½ä»¤è®©æˆ‘ä»¬åˆ†æ SQL çš„æ‰§è¡Œè®¡åˆ’ï¼Œä»è€Œåˆ¤æ–­è¿™ä¸ª SQL è¯­å¥æœ‰æ²¡æœ‰èµ°ç´¢å¼•ï¼Œæˆ–è€…æ˜¯ä¸æ˜¯èµ°å¾—æœ€ä¼˜çš„ç´¢å¼•ã€‚</p> <p>è¿™ä¸ªå‘½ä»¤ä¸€å…±æä¾›äº†10ä¸ªå‚æ•°æ¥åˆ†æ SQL ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>idã€select_typeã€tableã€typeã€possible_keysã€keyã€key_lenã€refã€rowsã€Extra
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸‹é¢æ ¹æ®æ¡ˆä¾‹ï¼Œæ¥è¯¦è§£å„ä¸ªå‚æ•°çš„å«ä¹‰ï¼Œåˆå§‹åŒ–è¡¨å¦‚ä¸‹ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--ç”¨æˆ·è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tuser<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
loginname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
age <span class="token keyword">int</span><span class="token punctuation">,</span>
sex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
dep <span class="token keyword">int</span><span class="token punctuation">,</span>  
address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--éƒ¨é—¨è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tdep<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--åœ°å€è¡¨</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> taddr<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
addr <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--æµ‹è¯•</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
<span class="token keyword">user</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--åˆ›å»ºæ™®é€šç´¢å¼•</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">alter</span> <span class="token keyword">table</span> tuser <span class="token keyword">add</span> <span class="token keyword">index</span> idx_dep<span class="token punctuation">(</span>dep<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--åˆ›å»ºå”¯ä¸€ç´¢å¼•</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">alter</span> <span class="token keyword">table</span> tuser <span class="token keyword">add</span> <span class="token keyword">unique</span> <span class="token keyword">index</span> idx_loginname<span class="token punctuation">(</span>loginname<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--åˆ›å»ºç»„åˆç´¢å¼•</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">alter</span> <span class="token keyword">table</span> tuser <span class="token keyword">add</span> <span class="token keyword">index</span> idx_name_age_sex<span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--åˆ›å»ºå…¨æ–‡ç´¢å¼•</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">alter</span> <span class="token keyword">table</span> taddr <span class="token keyword">add</span> fulltext ft_addr<span class="token punctuation">(</span>addr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="id"><a href="#id" class="header-anchor">#</a> id</h2> <p>è¿™ä¸ªå‚æ•°æŒ‡æ˜äº† SQL çš„æ‰§è¡Œé¡ºåºï¼Œä¸€å…±æœ‰ä¸‰ç§æƒ…å†µï¼š</p> <ul><li><code>id</code> ç›¸åŒçš„è¯ï¼Œæ‰§è¡Œé¡ºåºæ˜¯ç”±ä¸Šå¾€ä¸‹</li> <li><code>id</code> ä¸åŒçš„è¯ï¼Œ<strong style="color:#3EAF7C;">idå€¼è¶Šå¤§çš„è¶Šå…ˆæ‰§è¡Œ</strong>ã€‚</li> <li><code>id</code> ä¸º <code>NULL</code> çš„è¯ï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼æ˜¯ä¸€ä¸ªç»“æœé›†ï¼Œä¸éœ€è¦ç»§ç»­æ‰§è¡Œã€‚</li></ul> <h2 id="select-type-é‡è¦"><a href="#select-type-é‡è¦" class="header-anchor">#</a> select_type ğŸ’¥ é‡è¦</h2> <p>è¿™ä¸ªå‚æ•°æŒ‡æ˜çš„æ˜¯æŸ¥è¯¢ç±»å‹ï¼Œç”¨æ¥åŒºåˆ« <code>æ™®é€šæŸ¥è¯¢</code>ã€<code>è”åˆæŸ¥è¯¢(unionã€union all)</code>ã€<code>å­æŸ¥è¯¢</code> ç­‰å…¶å®ƒå¤æ‚æŸ¥è¯¢ã€‚</p> <h3 id="simple"><a href="#simple" class="header-anchor">#</a> simple</h3> <p>å¦‚æœå€¼ä¸º <code>simple</code> ï¼Œå°±è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª<strong style="color:#3EAF7C;">ä¸éœ€è¦<code>union</code>æ“ä½œå’Œå­æŸ¥è¯¢æ“ä½œ</strong>çš„ç®€å•selectæŸ¥è¯¢ï¼Œå½“æœ‰è¿æ¥æŸ¥è¯¢çš„ï¼Œå¤–å±‚çš„æŸ¥è¯¢å°±æ˜¯ <code>simple</code>ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> explain <span class="token keyword">select</span> * from tuser<span class="token punctuation">;</span>
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type <span class="token operator">|</span> table <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token builtin class-name">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> key  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> rows <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> SIMPLE      <span class="token operator">|</span> tuser <span class="token operator">|</span> NULL       <span class="token operator">|</span> ALL  <span class="token operator">|</span> NULL          <span class="token operator">|</span> NULL <span class="token operator">|</span> NULL    <span class="token operator">|</span> NULL <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> NULL  <span class="token operator">|</span>
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="primary"><a href="#primary" class="header-anchor">#</a> primary</h3> <p>å½“å­˜åœ¨ <code>union</code> æˆ– <code>å­æŸ¥è¯¢</code> æ—¶ï¼Œä½äºæœ€å¤–å±‚çš„æŸ¥è¯¢è¯­å¥çš„ <code>select_type</code> å°±æ˜¯ <code>primary</code>ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªã€‚</p> <p>ä½¿ç”¨ <code>union</code> æŸ¥è¯¢</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> explain <span class="token keyword">select</span> * from tdep where <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">1</span> union <span class="token keyword">select</span> * from tdep where <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
+----+--------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-----------------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type  <span class="token operator">|</span> table      <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token builtin class-name">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> key     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> rows <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra           <span class="token operator">|</span>
+----+--------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-----------------+
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> PRIMARY      <span class="token operator">|</span> tdep       <span class="token operator">|</span> NULL       <span class="token operator">|</span> const <span class="token operator">|</span> PRIMARY       <span class="token operator">|</span> PRIMARY <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> NULL            <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> UNION        <span class="token operator">|</span> tdep       <span class="token operator">|</span> NULL       <span class="token operator">|</span> const <span class="token operator">|</span> PRIMARY       <span class="token operator">|</span> PRIMARY <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> NULL            <span class="token operator">|</span>
<span class="token operator">|</span> NULL <span class="token operator">|</span> UNION RESULT <span class="token operator">|</span> <span class="token operator">&lt;</span>union1,<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span> <span class="token operator">|</span> NULL       <span class="token operator">|</span> ALL   <span class="token operator">|</span> NULL          <span class="token operator">|</span> NULL    <span class="token operator">|</span> NULL    <span class="token operator">|</span> NULL  <span class="token operator">|</span> NULL <span class="token operator">|</span>     NULL <span class="token operator">|</span> Using temporary <span class="token operator">|</span>
+----+--------------+------------+------------+-------+---------------+---------+---------+-------+------+----------+-----------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å­æŸ¥è¯¢çš„ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> explain <span class="token keyword">select</span> * from tdep where <span class="token function">id</span> <span class="token operator">=</span> <span class="token punctuation">(</span>select <span class="token function">id</span> from tuser where <span class="token function">id</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type <span class="token operator">|</span> table <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token builtin class-name">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> key     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> rows <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------------+
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> PRIMARY     <span class="token operator">|</span> tdep  <span class="token operator">|</span> NULL       <span class="token operator">|</span> const <span class="token operator">|</span> PRIMARY       <span class="token operator">|</span> PRIMARY <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> NULL        <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> SUBQUERY    <span class="token operator">|</span> tuser <span class="token operator">|</span> NULL       <span class="token operator">|</span> const <span class="token operator">|</span> PRIMARY       <span class="token operator">|</span> PRIMARY <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> Using index <span class="token operator">|</span>
+----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="subquery"><a href="#subquery" class="header-anchor">#</a> subquery</h3> <p>é™¤äº† <code>from</code> å­—å¥ä¸­åŒ…å«çš„å­æŸ¥è¯¢å¤–ï¼Œå…¶ä»–åœ°æ–¹å‡ºç°çš„å­æŸ¥è¯¢éƒ½å¯èƒ½æ˜¯ <code>subquery</code>ï¼Œå¯¹äº <code>from</code> å­å¥ä¸­åŒ…å«æ—¶ï¼Œä¼šæ˜¾ç¤º <code>simple</code> ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> explain <span class="token keyword">select</span> * from <span class="token punctuation">(</span>select * from tuser<span class="token punctuation">)</span> a<span class="token punctuation">;</span>
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type <span class="token operator">|</span> table <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token builtin class-name">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> key  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> rows <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> SIMPLE      <span class="token operator">|</span> tuser <span class="token operator">|</span> NULL       <span class="token operator">|</span> ALL  <span class="token operator">|</span> NULL          <span class="token operator">|</span> NULL <span class="token operator">|</span> NULL    <span class="token operator">|</span> NULL <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> NULL  <span class="token operator">|</span>
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="dependent-subquery"><a href="#dependent-subquery" class="header-anchor">#</a> dependent subquery</h3> <p>ä¸ <code>dependent union</code> ç±»ä¼¼ï¼Œè¡¨ç¤ºè¿™ä¸ª <code>subquery</code> çš„æŸ¥è¯¢è¦å—åˆ°å¤–éƒ¨è¡¨æŸ¥è¯¢çš„å½±å“ï¼Œ</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> id<span class="token punctuation">,</span>username<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> username <span class="token keyword">from</span> tdep a <span class="token keyword">where</span> a<span class="token punctuation">.</span>id<span class="token operator">=</span>b<span class="token punctuation">.</span>dep<span class="token punctuation">)</span> <span class="token keyword">from</span> tuser b<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+--------------------+-------+------------+--------+---------------+---------+---------+-------------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type        <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>   <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref         <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------------+-------+------------+--------+---------------+---------+---------+-------------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>            <span class="token operator">|</span> b     <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>        <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> DEPENDENT SUBQUERY <span class="token operator">|</span> a     <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> eq_ref <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> study<span class="token punctuation">.</span>b<span class="token punctuation">.</span>dep <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------------------+-------+------------+--------+---------------+---------+---------+-------------+------+----------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="union"><a href="#union" class="header-anchor">#</a> union</h3> <p><code>union</code> è¿æ¥çš„ä¸¤ä¸ª <code>select</code> æŸ¥è¯¢ï¼Œç¬¬ä¸€ä¸ªæŸ¥è¯¢æ˜¯ <code>PRIMARY</code> ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªè¡¨å¤–ï¼Œç¬¬äºŒä¸ªä»¥åçš„è¡¨<code>select_type</code>éƒ½æ˜¯<code>union</code></p> <h3 id="dependent-union"><a href="#dependent-union" class="header-anchor">#</a> dependent union</h3> <p>ä¸<code>union</code>ä¸€æ ·ï¼Œå‡ºç°åœ¨<code>union</code> æˆ–<code>union all</code>è¯­å¥ä¸­ï¼Œä½†æ˜¯è¿™ä¸ªæŸ¥è¯¢è¦å—åˆ°å¤–éƒ¨æŸ¥è¯¢çš„å½±å“ï¼Œä¾‹å¦‚ä¸‹é¢çš„å­æŸ¥è¯¢çš„ç»“æœä¼šä½œä¸ºä¸»æŸ¥è¯¢çš„æ¡ä»¶è¢«å…³è”èµ·æ¥ï¼Œå› æ­¤äº§ç”Ÿ <code>dependent union</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> explain <span class="token keyword">select</span> * from tuser where sex <span class="token keyword">in</span> <span class="token punctuation">(</span>select sex from tuser where <span class="token assign-left variable">sex</span><span class="token operator">=</span><span class="token string">'1'</span> union <span class="token keyword">select</span> sex from tuser where <span class="token assign-left variable">sex</span><span class="token operator">=</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
+----+--------------------+------------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+
<span class="token operator">|</span> <span class="token function">id</span> <span class="token operator">|</span> select_type        <span class="token operator">|</span> table      <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token builtin class-name">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> key              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> rows <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                    <span class="token operator">|</span>
+----+--------------------+------------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> PRIMARY            <span class="token operator">|</span> tuser      <span class="token operator">|</span> NULL       <span class="token operator">|</span> ALL   <span class="token operator">|</span> NULL          <span class="token operator">|</span> NULL             <span class="token operator">|</span> NULL    <span class="token operator">|</span> NULL <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> Using where              <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> DEPENDENT SUBQUERY <span class="token operator">|</span> tuser      <span class="token operator">|</span> NULL       <span class="token operator">|</span> index <span class="token operator">|</span> NULL          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> NULL <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> Using where<span class="token punctuation">;</span> Using index <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> DEPENDENT UNION    <span class="token operator">|</span> tuser      <span class="token operator">|</span> NULL       <span class="token operator">|</span> index <span class="token operator">|</span> NULL          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> NULL <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> Using where<span class="token punctuation">;</span> Using index <span class="token operator">|</span>
<span class="token operator">|</span> NULL <span class="token operator">|</span> UNION RESULT       <span class="token operator">|</span> <span class="token operator">&lt;</span>union2,<span class="token operator"><span class="token file-descriptor important">3</span>&gt;</span> <span class="token operator">|</span> NULL       <span class="token operator">|</span> ALL   <span class="token operator">|</span> NULL          <span class="token operator">|</span> NULL             <span class="token operator">|</span> NULL    <span class="token operator">|</span> NULL <span class="token operator">|</span> NULL <span class="token operator">|</span>     NULL <span class="token operator">|</span> Using temporary          <span class="token operator">|</span>
+----+--------------------+------------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="union-result"><a href="#union-result" class="header-anchor">#</a> union result</h3> <p>åŒ…å« <code>union</code> çš„ç»“æœé›†ï¼Œåœ¨<code>union</code>å’Œ<code>union all</code>è¯­å¥ä¸­,å› ä¸ºå®ƒä¸éœ€è¦å‚ä¸æŸ¥è¯¢ï¼Œæ‰€ä»¥<code>id</code>å­—æ®µä¸º<code>null</code></p> <h3 id="derived"><a href="#derived" class="header-anchor">#</a> derived</h3> <p><code>from</code>å­—å¥ä¸­å‡ºç°çš„å­æŸ¥è¯¢ï¼Œä¹Ÿå«åšæ´¾ç”Ÿè¡¨ï¼Œå…¶ä»–æ•°æ®åº“ä¸­å¯èƒ½å«åšå†…è”è§†å›¾æˆ–åµŒå¥—select,<code>MYSQL 5.7</code> åï¼Œ<code>from</code> å­å¥ä¸­å‡ºç°çš„å­æŸ¥è¯¢ï¼Œå¹¶ä¸ä¼šè¢«è¯†åˆ«ä¸º <code>derived</code> ï¼Œè€Œæ˜¯ <code>simple</code>.</p> <h2 id="table"><a href="#table" class="header-anchor">#</a> table</h2> <p><code>table</code> å­—æ®µè¡¨ç¤ºçš„æ˜¯ï¼Œå½“å‰ <code>SQL</code> è¯­å¥æ˜¯åœ¨å“ªå¼ è¡¨ä¸Šæ‰§è¡Œçš„ï¼š</p> <ul><li>æ˜¾ç¤ºçš„æŸ¥è¯¢è¡¨åï¼Œå¦‚æœæŸ¥è¯¢ä½¿ç”¨äº†åˆ«åï¼Œé‚£ä¹ˆè¿™é‡Œæ˜¾ç¤ºçš„æ˜¯åˆ«å</li> <li>å¦‚æœä¸æ¶‰åŠå¯¹æ•°æ®è¡¨çš„æ“ä½œï¼Œé‚£ä¹ˆè¿™æ˜¾ç¤ºä¸º<code>null</code></li> <li>å¦‚æœæ˜¾ç¤ºä¸ºå°–æ‹¬å·æ‹¬èµ·æ¥çš„å°±è¡¨ç¤ºè¿™ä¸ªæ˜¯ä¸´æ—¶è¡¨ï¼Œåè¾¹çš„Nå°±æ˜¯æ‰§è¡Œè®¡åˆ’ä¸­çš„idï¼Œè¡¨ç¤ºç»“æœæ¥è‡ªäºè¿™ä¸ªæŸ¥è¯¢äº§ç”Ÿã€‚</li> <li>å¦‚æœæ˜¯å°–æ‹¬å·æ‹¬èµ·æ¥çš„<code>&lt;union M,N&gt;</code>ï¼Œä¸ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸´æ—¶è¡¨ï¼Œè¡¨ç¤ºè¿™ä¸ªç»“æœæ¥è‡ªäº <code>union</code> æŸ¥è¯¢çš„<code>id</code>ä¸º<code>M,N</code>çš„ç»“æœé›†ã€‚</li></ul> <h2 id="type-é‡è¦"><a href="#type-é‡è¦" class="header-anchor">#</a> type ğŸ’¥ é‡è¦</h2> <p><code>type</code> æ˜¯ä¸€ä¸ªååˆ†é‡è¦çš„æ€§èƒ½æŒ‡æ ‡ï¼Œ<strong style="color:#3EAF7C;">å®ƒç›´æ¥è¡¨æ˜äº†æˆ‘ä»¬çš„ SQL è¯­å¥æ˜¯å¦æœ‰ä½¿ç”¨åˆ°ç´¢å¼•</strong>ã€‚ä»¥ä¸‹åˆ—å‡º <code>type</code> çš„æ‰€æœ‰å€¼ï¼Œå¹¶æŒ‰ç…§æ€§èƒ½ä¾æ¬¡æ’åºï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemï¼Œconstï¼Œeq_refï¼Œrefï¼Œfulltextï¼Œref_or_nullï¼Œunique_subqueryï¼Œindex_subqueryï¼Œrangeï¼Œindex_mergeï¼Œindexï¼ŒALL
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™äº›æŒ‡æ ‡ä¸­ï¼Œ<strong style="color:#3EAF7C;">é™¤äº† <code>all</code> ä¹‹å¤–çš„ï¼Œéƒ½èƒ½å¤Ÿç”¨åˆ°ç´¢å¼•ï¼Œå¹¶ä¸”é™¤äº† <code>index_merge</code> ä¹‹å¤–ï¼Œéƒ½åªèƒ½ä½¿ç”¨ä¸€ä¸ªç´¢å¼•</strong>ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">å»ºè®®</p> <p>ç´¢å¼•æœ€ä½ä¹Ÿè¦ä½¿ç”¨åˆ° <code>range</code> çº§åˆ«ã€‚</p></div> <h3 id="system"><a href="#system" class="header-anchor">#</a> system</h3> <p>å½“è¡¨ä¸­åªæœ‰ä¸€è¡Œæ•°æ®æˆ–è€…æ˜¯ç©ºè¡¨çš„æ—¶å€™ï¼Œå°±ä¼šæ˜¾ç¤º <code>system</code> ã€‚</p> <div class="custom-block tip"><p class="custom-block-title">å…¶å®ƒç‰ˆæœ¬</p> <p>æµ‹è¯•ç‰ˆæœ¬ 5.7.29 å°±ç®—æ˜¯ç©ºè¡¨æŸ¥å‡ºæ¥ä¹Ÿä¸æ˜¯ <code>system</code></p></div> <p><img src="/mysql_img/system.jpg" alt="img"></p> <h3 id="const-é‡è¦"><a href="#const-é‡è¦" class="header-anchor">#</a> const ğŸ‘ é‡è¦</h3> <p>å½“ä½¿ç”¨<code>ä¸»é”®ç´¢å¼•</code>æˆ–<code>å”¯ä¸€ç´¢å¼•</code>æ—¶ï¼Œè¿”å›çš„è®°å½•æ•°ä¸€å®šæ˜¯ä¸€æ¡ï¼Œå¹¶ä¸”æ˜¯ç­‰å€¼çš„ <code>where</code> æ¡ä»¶æ—¶ï¼Œé€šå¸¸æ˜¾ç¤º <code>const</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> test  <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> const <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+---------+---------+-------+------+----------+-------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="eq-ref-é‡è¦"><a href="#eq-ref-é‡è¦" class="header-anchor">#</a> eq_ref ğŸ‘ é‡è¦</h3> <p>å½“è¿›è¡Œå…³è”æŸ¥è¯¢æ—¶ï¼Œå¦‚æœå…³è”çš„æ¡ä»¶æ˜¯<code>ä¸»é”®</code>æˆ–è€…<code>å”¯ä¸€ç´¢å¼•</code>è¿›è¡Œä¸€å¯¹ä¸€çš„å…³è”æ—¶ï¼Œå°±ä¼šå‡ºç° <code>eq_ref</code>ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser<span class="token punctuation">,</span>tdep <span class="token keyword">where</span> tuser<span class="token punctuation">.</span>id <span class="token operator">=</span> tdep<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+--------+---------------+---------+---------+---------------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>   <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref           <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+--------+---------------+---------+---------+---------------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tdep  <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>    <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> eq_ref <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> study<span class="token punctuation">.</span>tdep<span class="token punctuation">.</span>id <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+--------+---------------+---------+---------+---------------+------+----------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ref-é‡è¦"><a href="#ref-é‡è¦" class="header-anchor">#</a> ref ğŸ‘ é‡è¦</h3> <p><code>ref</code> é€šå¸¸å‡ºç°åœ¨ä½¿ç”¨äº†<code>éå”¯ä¸€ç´¢å¼•</code>çš„ç­‰å€¼æŸ¥è¯¢ã€<code>ç­‰å€¼éä¸»é”®</code>æŸ¥è¯¢æˆ–æ»¡è¶³<code>æœ€å·¦å‰ç¼€</code>çš„ç»„åˆç´¢å¼•æŸ¥è¯¢ä¸­ã€‚<strong style="color:#3EAF7C;">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ä½¿ç”¨éå”¯ä¸€ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œè‹¥æŸ¥è¯¢æ¡ä»¶è¿‡æ»¤å‡ºæ¥çš„æ•°æ®é‡è¶…è¿‡äº†æ€»æ•°æ®é‡çš„ 1/3ï¼Œä¼šä½¿å¾—ç´¢å¼•å¤±æ•ˆï¼Œä»è€Œèµ°å…¨è¡¨æ‰«æ</strong></p> <p><strong>éå”¯ä¸€ç´¢å¼•æƒ…å†µ</strong>ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> dep<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+---------+---------+-------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+---------+---------+-------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref  <span class="token operator">|</span> idx_dep       <span class="token operator">|</span> idx_dep <span class="token operator">|</span> <span class="token number">5</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+---------+---------+-------+------+----------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>ç­‰å€¼éä¸»é”®è¿æ¥</strong>ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> a<span class="token punctuation">.</span>id <span class="token keyword">from</span> tuser a <span class="token keyword">left</span> <span class="token keyword">join</span> tdep b <span class="token keyword">on</span> a<span class="token punctuation">.</span>username<span class="token operator">=</span>b<span class="token punctuation">.</span>username<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------------------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref              <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------------------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> a     <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">index</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>             <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> b     <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref   <span class="token operator">|</span> username      <span class="token operator">|</span> username         <span class="token operator">|</span> <span class="token number">303</span>     <span class="token operator">|</span> study<span class="token punctuation">.</span>a<span class="token punctuation">.</span>username <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------------------+------+----------+-------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>æ³¨æ„ï¼Œè¿™é‡Œ <code>on</code> æ¡ä»¶çš„ä¸¤è¾¹éƒ½éœ€è¦åˆ›å»ºç´¢å¼•ï¼Œå¦åˆ™éƒ½ä¼šå¯¼è‡´æœ‰ä¸€è¾¹è¿›è¡Œå…¨è¡¨æ‰«æ</p></div> <p><strong>æœ€å·¦å‰ç¼€è§„åˆ™</strong>ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">=</span> <span class="token string">'zhf'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref  <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">303</span>     <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------+------+----------+-------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="fulltext"><a href="#fulltext" class="header-anchor">#</a> fulltext</h3> <p>å…¨æ–‡ç´¢å¼•æ£€ç´¢ï¼Œè¦æ³¨æ„ï¼Œ<strong style="color:#3EAF7C;">å…¨æ–‡ç´¢å¼•çš„ä¼˜å…ˆçº§å¾ˆé«˜ï¼Œè‹¥å…¨æ–‡ç´¢å¼•å’Œæ™®é€šç´¢å¼•åŒæ—¶å­˜åœ¨æ—¶ï¼Œmysqlä¸ç®¡ä»£ä»·ï¼Œä¼˜å…ˆé€‰æ‹©ä½¿ç”¨å…¨æ–‡ç´¢å¼•</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> taddr <span class="token keyword">where</span> <span class="token keyword">match</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span> against<span class="token punctuation">(</span><span class="token string">'bei'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+----------+---------------+---------+---------+-------+------+----------+-------------------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>     <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+----------+---------------+---------+---------+-------+------+----------+-------------------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> taddr <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> fulltext <span class="token operator">|</span> ft_addr       <span class="token operator">|</span> ft_addr <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span><span class="token punctuation">;</span> Ft_hints: sorted <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+----------+---------------+---------+---------+-------+------+----------+-------------------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="ref-or-null"><a href="#ref-or-null" class="header-anchor">#</a> ref_or_null</h3> <p>ä¸ <code>ref</code> æ–¹æ³•ç±»ä¼¼ï¼Œåªæ˜¯å¢åŠ äº†nullå€¼çš„æ¯”è¾ƒã€‚å®é™…ç”¨çš„ä¸å¤šã€‚</p> <h3 id="unique-subquery"><a href="#unique-subquery" class="header-anchor">#</a> unique_subquery</h3> <p>ç”¨äºwhereä¸­çš„inå½¢å¼å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢è¿”å›ä¸é‡å¤å€¼å”¯ä¸€å€¼</p> <h3 id="index-subquery"><a href="#index-subquery" class="header-anchor">#</a> index_subquery</h3> <p>ç”¨äº <code>in</code> å½¢å¼å­æŸ¥è¯¢ä½¿ç”¨åˆ°äº†è¾…åŠ©ç´¢å¼•æˆ–è€…inå¸¸æ•°åˆ—è¡¨ï¼Œå­æŸ¥è¯¢å¯èƒ½è¿”å›é‡å¤å€¼ï¼Œå¯ä»¥ä½¿ç”¨ç´¢å¼•å°†å­æŸ¥è¯¢å»é‡ã€‚</p> <h3 id="range-é‡è¦"><a href="#range-é‡è¦" class="header-anchor">#</a> range ğŸ’¥ é‡è¦</h3> <p><code>range</code> å‡ºç°åœ¨ç”¨ç´¢å¼•è¿›è¡ŒèŒƒå›´æŸ¥è¯¢çš„æƒ…å†µä¸­ï¼Œé€šå¸¸éšç€å…³é”®å­— <code>&gt;</code> ,<code>&lt;</code> ,<code>is null</code> ,<code>between</code> ,<code>in</code> ,<code>like</code>ç­‰è¿ç®—ç¬¦çš„æŸ¥è¯¢ä¸­ã€‚</p> <p>ä¾‹å¦‚ä¸»é”®èŒƒå›´æŸ¥è¯¢ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> id <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>     <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> range <span class="token operator">|</span> <span class="token keyword">PRIMARY</span>       <span class="token operator">|</span> <span class="token keyword">PRIMARY</span> <span class="token operator">|</span> <span class="token number">4</span>       <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+---------+---------+------+------+----------+-------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong style="color:#3EAF7C;">å½“ä½¿ç”¨ <code>%</code> å·æ—¶ï¼Œå¦‚æœæ˜¯ä½¿ç”¨ <code>å¸¸é‡%</code>ï¼Œæ‰èƒ½ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œå¦‚æœä½¿ç”¨ <code>%å¸¸é‡</code> ï¼Œæ˜¯æ— æ³•ä½¿ç”¨ç´¢å¼•çš„ï¼Œ</strong>å› ä¸ºéœ€è¦é€ä¸ªæ¯”è¾ƒæ‰å¯ä»¥ ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- % åœ¨åé¢</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'z%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> range <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">303</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> condition <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment">-- % åœ¨å‰é¢</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'%z%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="index-é‡è¦"><a href="#index-é‡è¦" class="header-anchor">#</a> index ğŸ‘ é‡è¦</h3> <p><code>index</code> ä¸»è¦æ˜¯å½“ä½¿ç”¨äº†<strong style="color:#3EAF7C;">è¦†ç›–ç´¢å¼•</strong>çš„æ—¶å€™å°±ä¼šä½“ç°å‡ºæ¥ã€‚ä¾‹å¦‚ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> username <span class="token keyword">from</span> tuser<span class="token punctuation">;</span>          
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">index</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+-------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="all-é‡è¦"><a href="#all-é‡è¦" class="header-anchor">#</a> all ğŸ‘ é‡è¦</h3> <p><code>all</code> æ˜¯æ‰€æœ‰ç´¢å¼•æƒ…å†µä¸­æœ€æ…¢çš„ä¸€ä¸ªäº†ï¼Œå› ä¸ºå®ƒè¦èµ°çš„æ˜¯<strong style="color:#3EAF7C;">å…¨è¡¨æ‰«æ</strong>ï¼Œä¹Ÿå°±æ˜¯éå†ä¸»é”®ç´¢å¼•æ ‘ä¸Šçš„æ‰€æœ‰æ•°æ®ï¼Œå…¨éƒ¨è¿”å›åˆ° <code>server</code> å±‚ä¸­ï¼Œè¯»å–åˆ°å†…å­˜é‡Œï¼Œå¹¶æ ¹æ® <code>where</code> æ¡ä»¶è¿›è¡Œè¿‡æ»¤åˆ¤æ–­ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œåˆ™å–ä¸‹ä¸€æ¡è®°å½•åˆ¤æ–­ã€‚</p> <h2 id="possible-keys"><a href="#possible-keys" class="header-anchor">#</a> possible keys</h2> <p>è¿™ä¸€åˆ—è¡¨ç¤ºçš„æ˜¯ï¼Œè¿™æ¬¡æŸ¥è¯¢ä¸­<strong style="color:#3EAF7C;">å¯èƒ½</strong>ä¼šç”¨åˆ°çš„ç´¢å¼•ã€‚</p> <h2 id="key"><a href="#key" class="header-anchor">#</a> key</h2> <p>è¿™ä¸€åˆ—è¡¨ç¤ºè¿™æ¬¡æŸ¥è¯¢ä¸­<strong style="color:#3EAF7C;">å®é™…ä¸Š</strong>ç”¨åˆ°çš„ç´¢å¼•</p> <h2 id="key-len"><a href="#key-len" class="header-anchor">#</a> key len</h2> <p>è¿™ä¸€åˆ—è¡¨ç¤ºè¿™æ¬¡æŸ¥è¯¢ä¸­ï¼Œä½¿ç”¨åˆ°çš„ç´¢å¼•çš„é•¿åº¦ï¼Œå› ä¸ºç»„åˆç´¢å¼•ä¸ä¸€å®šä¼šè¢«å…¨éƒ¨ç”¨å®Œï¼Œæ‰€ä»¥é•¿åº¦ä¼šä¸ä¸€æ ·</p> <p>å¦å¤–ï¼Œ<code>key_len</code> åªè®¡ç®— <code>where</code> æ¡ä»¶ç”¨åˆ°çš„ç´¢å¼•é•¿åº¦ï¼Œè€Œæ’åºå’Œåˆ†ç»„å°±ç®—ç”¨åˆ°äº†ç´¢å¼•ï¼Œä¹Ÿä¸ä¼šè®¡ç®—åˆ°<code>key_len</code>ä¸­ã€‚</p> <h2 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h2> <p><code>ref</code> è¡¨ç¤ºæŸ¥è¯¢æ¡ä»¶ä¸­å…³è”äº†å“ªäº›å€¼ï¼š</p> <ul><li>å¦‚æœæ˜¯ä½¿ç”¨çš„å¸¸æ•°ç­‰å€¼æŸ¥è¯¢ï¼Œè¿™é‡Œä¼šæ˜¾ç¤º <code>const</code></li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">=</span> <span class="token string">'zhangfei'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref         <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref  <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">308</span>     <span class="token operator">|</span> const<span class="token punctuation">,</span>const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------+------+----------+-------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>å¦‚æœæ˜¯è¿æ¥æŸ¥è¯¢ï¼Œè¢«é©±åŠ¨è¡¨çš„æ‰§è¡Œè®¡åˆ’è¿™é‡Œä¼šæ˜¾ç¤ºé©±åŠ¨è¡¨çš„å…³è”å­—æ®µ</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- ref å…³è”äº† study.a.username</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> a<span class="token punctuation">.</span>id <span class="token keyword">from</span> tuser a <span class="token keyword">left</span> <span class="token keyword">join</span> tdep b <span class="token keyword">on</span> a<span class="token punctuation">.</span>username<span class="token operator">=</span>b<span class="token punctuation">.</span>username<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------------------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref              <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------------------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> a     <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">index</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>             <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> b     <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref   <span class="token operator">|</span> username      <span class="token operator">|</span> username         <span class="token operator">|</span> <span class="token number">303</span>     <span class="token operator">|</span> study<span class="token punctuation">.</span>a<span class="token punctuation">.</span>username <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------------------+------+----------+-------------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>å¦‚æœæ˜¯æ¡ä»¶ä½¿ç”¨äº†è¡¨è¾¾å¼æˆ–è€…å‡½æ•°ï¼Œæˆ–è€…æ¡ä»¶åˆ—å‘ç”Ÿäº†å†…éƒ¨éšå¼è½¬æ¢ï¼Œè¿™é‡Œå¯èƒ½æ˜¾ç¤ºä¸ºfunc</li></ul> <h2 id="rows"><a href="#rows" class="header-anchor">#</a> rows</h2> <p><code>row</code> è¡¨ç¤º <code>Server</code> å±‚æ‰¾å­˜å‚¨å¼•æ“å±‚æ‹¿åˆ°çš„è®°å½•æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰§è¡Œè®¡åˆ’ä¸­ä¼°ç®—çš„æ‰«æè¡Œæ•°ï¼Œä¸æ˜¯ç²¾ç¡®å€¼ï¼ˆInnoDBä¸æ˜¯ç²¾ç¡®çš„å€¼ï¼ŒMyISAMæ˜¯ç²¾ç¡®çš„å€¼ï¼Œä¸»è¦åŸ
å› æ˜¯InnoDBé‡Œé¢ä½¿ç”¨äº†MVCCå¹¶å‘æœºåˆ¶ï¼‰</p> <h2 id="filtered"><a href="#filtered" class="header-anchor">#</a> filtered</h2> <p>5.7ä¹‹åçš„ç‰ˆæœ¬é»˜è®¤å°±æœ‰è¿™ä¸ªå­—æ®µï¼Œä¸éœ€è¦ä½¿ç”¨explain extendedäº†ã€‚è¿™ä¸ªå­—æ®µè¡¨ç¤ºå­˜å‚¨å¼•æ“è¿”å›çš„æ•°æ®åœ¨serverå±‚è¿‡æ»¤åï¼Œå‰©ä¸‹å¤šå°‘æ»¡è¶³æŸ¥è¯¢çš„è®°å½•æ•°é‡çš„æ¯”ä¾‹ï¼Œæ³¨æ„æ˜¯ç™¾åˆ†æ¯”ï¼Œä¸æ˜¯å…·ä½“è®°å½•æ•°ã€‚</p> <h2 id="extra-é‡è¦"><a href="#extra-é‡è¦" class="header-anchor">#</a> extra ğŸ’¥ é‡è¦</h2> <p>è¿™ä¸ªåˆ—çš„ä¿¡æ¯ä¸»è¦æ˜¯æè¿° SQL è¯­å¥çš„å¾ˆå¤šè¡¥å……ä¿¡æ¯ï¼Œä¾‹å¦‚ç´¢å¼•ä¸‹æ¨ã€æ˜¯å¦ä½¿ç”¨ä¸´æ—¶è¡¨ç­‰ã€‚ä¸‹é¢åˆ—ä¸¾å¸¸ç”¨çš„ï¼š</p> <h3 id="no-tables-used"><a href="#no-tables-used" class="header-anchor">#</a> no tables used</h3> <p>è¿™ä¸ªä¿¡æ¯è¡¨ç¤ºæ²¡æœ‰ <code>From</code> å­å¥çš„æŸ¥è¯¢ã€‚</p> <h3 id="using-filesort"><a href="#using-filesort" class="header-anchor">#</a> using filesort</h3> <p>å½“ä½¿ç”¨ <code>order by</code> æˆ–è€… <code>group by</code> è¿›è¡Œåˆ†ç»„æˆ–æ’åºæ—¶ï¼Œè‹¥æ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œå°±ä¼šå‡ºç° <code>using filesort</code> ,è¡¨ç¤ºåªèƒ½é€šè¿‡æ–‡ä»¶è¿›è¡Œæ’åºï¼Œ<strong style="color:#3EAF7C;">æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªæ’åºä¹Ÿæ˜¯åœ¨ server å±‚å®ç°çš„ï¼Œå…ˆæŠŠæ‰€æœ‰æ•°æ®å–å‡ºæ¥ï¼Œå†ä¸€æ¡æ¡çš„å»æ’åº</strong>ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> taddr <span class="token keyword">order</span> <span class="token keyword">by</span> addr<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> taddr <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> filesort <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+----------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="using-index"><a href="#using-index" class="header-anchor">#</a> using index</h3> <p>è¿™ä¸ªä¿¡æ¯è¡¨ç¤ºæŸ¥è¯¢çš„æ—¶å€™ä¸éœ€è¦è¿›è¡Œ<strong style="color:#3EAF7C;">å›è¡¨</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨åˆ°è¦†ç›–ç´¢å¼•äº†ã€‚</p> <p>ä½†æ˜¯ï¼Œå¦‚æœåŒæ—¶å‡ºç° <code>Using Where</code> ï¼Œè¯´æ˜ç´¢å¼•è¢«ç”¨æ¥æ‰§è¡ŒæŸ¥æ‰¾ç´¢å¼•é”®å€¼äº†ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> username<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex <span class="token keyword">from</span> tuser <span class="token keyword">where</span> age <span class="token operator">&gt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">index</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">33.33</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span><span class="token punctuation">;</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™é‡Œçš„ <code>age</code> å¹¶æ— æ³•ä½¿ç”¨ç»„åˆç´¢å¼•ï¼Œå› æ­¤ä¼šå°†æ•°æ®è¿”å›ç»™ <code>server</code> å±‚è¿›è¡Œè¿‡æ»¤ï¼Œæ‰€ä»¥å‡ºç°äº† <code>using where</code></p> <h3 id="using-temporary"><a href="#using-temporary" class="header-anchor">#</a> using temporary</h3> <p>è¿™ä¸ªè¡¨ç¤ºä½¿ç”¨åˆ°äº†ä¸´æ—¶è¡¨ï¼Œé€šå¸¸æ˜¯åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€å¼ è¡¨ï¼Œæš‚æ—¶å­˜å‚¨è®°å½•ï¼Œä¾‹å¦‚ä»¥ä¸‹æƒ…å†µï¼š</p> <ul><li>MySQLåœ¨å¯¹æŸ¥è¯¢ç»“æœ <code>order by</code> å’Œ <code>group by</code> æ—¶ä½¿ç”¨ä¸´æ—¶è¡¨</li> <li>ä¸´æ—¶è¡¨å¯ä»¥æ˜¯å†…å­˜ä¸´æ—¶è¡¨å’Œç£ç›˜ä¸´æ—¶è¡¨ï¼Œæ‰§è¡Œè®¡åˆ’ä¸­çœ‹ä¸å‡ºæ¥ï¼Œéœ€è¦æŸ¥çœ‹ <code>status</code>å˜é‡ï¼Œ<code>used_tmp_table</code>ï¼Œ<code>used_tmp_disk_table</code>æ‰èƒ½çœ‹å‡ºæ¥ã€‚</li> <li>ä½¿ç”¨ <code>distinct</code> å…³é”®å­—ï¼Œæ­¤æ—¶ä¼šç”Ÿæˆä¸€å¼ ä¸€æ¨¡ä¸€æ ·çš„è¡¨ï¼Œå†ä¸€æ¡æ¡çš„å»è¿‡æ»¤ã€‚</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>è¿™ç§æŸ¥è¯¢æ•ˆç‡å¹¶ä¸é«˜</p></div> <h3 id="using-where-é‡è¦"><a href="#using-where-é‡è¦" class="header-anchor">#</a> using where ğŸ’¥ é‡è¦</h3> <p>è¿™ä¸ªä¿¡æ¯è¡¨ç¤ºè¿”å›çš„ç»“æœé›†å¹¶ä¸æ˜¯éƒ½æ»¡è¶³æŸ¥è¯¢æ¡ä»¶ï¼Œéœ€è¦åœ¨ <code>server</code> å±‚è¿‡æ»¤ï¼Œ<strong style="color:#3EAF7C;">ååˆ†å½±å“æ€§èƒ½</strong>ã€‚è€Œä¸”ï¼Œä¸€æ—¦å‡ºç°äº† <code>using where</code> ,åŸºæœ¬ä¸Šå°±æ²¡æ€ä¹ˆç”¨åˆ°ç´¢å¼•äº†ã€‚</p> <p>Using whereè¡¨ç¤ºMySQLå°†å¯¹å­˜å‚¨å¼•æ“å±‚æå–çš„ç»“æœè¿›è¡Œè¿‡æ»¤ï¼Œè¿‡æ»¤æ¡ä»¶å­—æ®µæ— ç´¢å¼•ã€‚ä¾‹å¦‚ï¼šselect * from test where age &gt; 30; æ‰€ä»¥ï¼ŒUsing whereæœ¬èº«å…¶å®å’Œæ˜¯å¦ä½¿ç”¨ç´¢å¼•æ— å…³ï¼Œå®ƒè¡¨ç¤ºçš„æ˜¯Serverå±‚å¯¹å­˜å‚¨å¼•æ“å±‚è¿”å›çš„æ•°æ®æ‰€åšçš„è¿‡æ»¤ã€‚<strong style="color:#3EAF7C;">å½“ç„¶è¯¥è¿‡æ»¤å¯èƒ½ä¼šå›è¡¨ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šå›è¡¨ï¼Œå–å†³äºæŸ¥è¯¢å­—æ®µæ˜¯å¦è¢«ç´¢å¼•è¦†ç›–ã€‚</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> sex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="using-index-condition-é‡è¦"><a href="#using-index-condition-é‡è¦" class="header-anchor">#</a> using index condition ğŸ’¥ é‡è¦</h3> <p>è¿™ä¸ªä¿¡æ¯è¡¨ç¤ºä½¿ç”¨åˆ°äº† <strong style="color:#3EAF7C;">ç´¢å¼•ä¸‹æ¨</strong>ï¼Œè¿™æ˜¯ <code>mysql 5.6</code> ä¹‹åæ–°å¢çš„ç‰¹æ€§ï¼Œç§°ä¸º <code>ICP</code>ï¼Œåœ¨ 5.6 ä¹‹å‰ï¼Œç”±äºç»„åˆç´¢å¼•ç¢°åˆ°èŒƒå›´æŸ¥è¯¢ä¹‹åçš„å°±ä¼šå¤±æ•ˆï¼Œå› æ­¤ <code>age=20</code> ä¼šå¯¼è‡´æŸ¥è¯¢å‡ºæ‰€æœ‰æ»¡è¶³ <code>zhang%</code> çš„æ•°æ®ï¼Œç„¶åå›åˆ° <code>server</code> æ ¹æ® <code>age=20</code> è¿›è¡Œè¿‡æ»¤ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'zhang%'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> range <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">308</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> condition <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="mysql-ç´¢å¼•å¤±æ•ˆåˆ†æ"><a href="#mysql-ç´¢å¼•å¤±æ•ˆåˆ†æ" class="header-anchor">#</a> MySQL ç´¢å¼•å¤±æ•ˆåˆ†æ</h2> <p>å£è¯€:</p> <p><img src="/mysql_img/koujue.png" alt="img"></p> <h3 id="å…¨å±€åŒ¹é…æˆ‘æœ€çˆ±"><a href="#å…¨å±€åŒ¹é…æˆ‘æœ€çˆ±" class="header-anchor">#</a> å…¨å±€åŒ¹é…æˆ‘æœ€çˆ±</h3> <p>å¯¹äºç»„åˆç´¢å¼•ï¼Œå¦‚æœå…¨éƒ¨ç´¢å¼•éƒ½ç”¨åˆ°äº†ï¼Œæ˜¯ä¸å¯èƒ½ä¼šå¤±æ•ˆçš„ã€‚</p> <h3 id="æœ€ä½³å·¦å‰ç¼€æ³•åˆ™"><a href="#æœ€ä½³å·¦å‰ç¼€æ³•åˆ™" class="header-anchor">#</a> æœ€ä½³å·¦å‰ç¼€æ³•åˆ™</h3> <p>å¯¹äºç»„åˆç´¢å¼•æ¥è¯´ï¼Œå¸¦å¤´ç´¢å¼•ä¸èƒ½æ­»ï¼Œä¸­é—´ç´¢å¼•ä¸èƒ½æ–­ï¼Œä¾‹å¦‚å­˜åœ¨ç»„åˆç´¢å¼• <code>(name, age, sex)</code>, å¦‚æœåœ¨æŸ¥è¯¢æ—¶ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¿™æ ·æ˜¯æ— æ³•ä½¿ç”¨ç´¢å¼•çš„ï¼Œå› ä¸ºç»„åˆç´¢å¼•çš„å¸¦å¤´å¤§å“¥ <code>name</code> éƒ½æ²¡æœ‰ä½¿ç”¨åˆ°ã€‚</p> <p>è€Œä¸”ä¸­é—´ç´¢å¼•ä¹Ÿä¸èƒ½æ–­ï¼Œä¸ç„¶ç´¢å¼•çš„ä½¿ç”¨ä¼šä¸å®Œæ•´ï¼Œä¾‹å¦‚ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'zhangfei'</span> <span class="token operator">and</span> sex <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>   
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------+------+----------+-----------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref   <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------+------+----------+-----------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref  <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">303</span>     <span class="token operator">|</span> const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> condition <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------+------+----------+-----------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™é‡Œå› ä¸º <code>age</code> ç´¢å¼•æ²¡ç”¨åˆ°ï¼Œå› æ­¤ <code>sex</code> ç´¢å¼•ä¹Ÿæ˜¯ç”¨ä¸åˆ°çš„ï¼Œä½†æ˜¯å¯ä»¥è§¦å‘ç´¢å¼•ä¸‹æ¨ <code>using index condition</code>.</p> <h3 id="ä¸è¦åœ¨ç´¢å¼•ä¸Šåšè®¡ç®—"><a href="#ä¸è¦åœ¨ç´¢å¼•ä¸Šåšè®¡ç®—" class="header-anchor">#</a> ä¸è¦åœ¨ç´¢å¼•ä¸Šåšè®¡ç®—</h3> <p>å¦‚æœåœ¨ç´¢å¼•ä¸Šè¿›è¡Œè®¡ç®—ã€å‡½æ•°ã€è‡ªåŠ¨/æ‰‹åŠ¨ç±»å‹è½¬æ¢ï¼Œéƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆè€Œè½¬å‘å…¨è¡¨æ‰«æ</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> <span class="token keyword">left</span><span class="token punctuation">(</span>loginname<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token string">'zy'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¯¹ <code>sex</code> åšäº†éšå¼è½¬æ¢ï¼Œå¯¼è‡´<code>sex</code> ç´¢å¼•æ— æ³•è¢«ä½¿ç”¨ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">=</span> <span class="token string">'zhangfei'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">and</span> sex<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref         <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref  <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">308</span>     <span class="token operator">|</span> const<span class="token punctuation">,</span>const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> condition <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------+------+----------+-----------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">warnings</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">=</span> <span class="token string">'zhangfei'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">and</span> sex<span class="token operator">=</span> <span class="token string">'1'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref               <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> ref  <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> const<span class="token punctuation">,</span>const<span class="token punctuation">,</span>const <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------------------+---------+-------------------+------+----------+-------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—å¤±æ•ˆ"><a href="#èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—å¤±æ•ˆ" class="header-anchor">#</a> èŒƒå›´æ¡ä»¶å³è¾¹çš„åˆ—å¤±æ•ˆ</h3> <p>åœ¨ç»„åˆç´¢å¼•ä¸­ï¼Œå³ä½¿æ‰€æœ‰çš„ç´¢å¼•æˆ‘ä»¬éƒ½ä½¿ç”¨åˆ°äº†ï¼Œä½†æ˜¯å¦‚æœä¸­é—´æŸä¸ªç´¢å¼•ä½¿ç”¨äº†èŒƒå›´æŸ¥è¯¢ï¼Œåˆ™ä¼šä½¿å¾—åé¢çš„ç´¢å¼•å¤±æ•ˆï¼Œä¸è¿‡å¯ä»¥è§¦å‘ç´¢å¼•ä¸‹æ¨ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'zhang%'</span> <span class="token operator">and</span> age<span class="token operator">&gt;</span><span class="token number">20</span> <span class="token operator">and</span> sex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> range <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">308</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> condition <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¿™é‡Œçš„ <code>sex</code> å­—æ®µæ˜¯æ²¡æœ‰ä½¿ç”¨åˆ°ç´¢å¼•çš„ï¼Œå…·ä½“å¯ä»¥é€šè¿‡ <code>key_len</code> è§‚å¯Ÿåˆ°</p> <h3 id="å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•"><a href="#å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•" class="header-anchor">#</a> å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•</h3> <p>å½“å†™ SQL é€šè¿‡ <code>select *</code> æ—¶ï¼Œé€šå¸¸ä¼šè§¦å‘å›è¡¨æˆ–è€…æ˜¯å…¨è¡¨æ‰«æç­‰å½±å“æ€§èƒ½çš„è¡Œä¸ºï¼Œå› æ­¤å°½é‡ä½¿ç”¨è¦†ç›–ç´¢å¼•æ¥é˜²æ­¢è¿™äº›ç´¢å¼•å¤±æ•ˆã€‚ä¾‹å¦‚ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- æ²¡æœ‰ä½¿ç”¨åˆ°è¦†ç›–ç´¢å¼•</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment">-- ä½¿ç”¨åˆ°è¦†ç›–ç´¢å¼•</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> username<span class="token punctuation">,</span>age<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>id <span class="token keyword">from</span> tuser<span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">index</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+-------------+</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="ç´¢å¼•å­—æ®µä¸Šä¸è¦ä½¿ç”¨ä¸ç­‰"><a href="#ç´¢å¼•å­—æ®µä¸Šä¸è¦ä½¿ç”¨ä¸ç­‰" class="header-anchor">#</a> ç´¢å¼•å­—æ®µä¸Šä¸è¦ä½¿ç”¨ä¸ç­‰</h3> <p>ç´¢å¼•å­—æ®µä¸Šä½¿ç”¨ï¼ˆï¼= æˆ–è€… &lt; &gt;ï¼‰åˆ¤æ–­æ—¶ï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆè€Œè½¬å‘å…¨è¡¨æ‰«æ</p> <blockquote><p>æ³¨ï¼šä¸»é”®ç´¢å¼•ä¼šä½¿ç”¨èŒƒå›´ç´¢å¼•ï¼Œè¾…åŠ©ç´¢å¼•ä¼šå¤±æ•ˆ</p></blockquote> <p>å› ä¸ºé€šè¿‡ä½¿ç”¨ <code>!=</code>ã€<code>&gt;</code>ã€<code>&lt;</code> æ—¶ï¼Œä¼šå¯¼è‡´æ•°æ®é‡è¶…è¿‡ <code>1/3</code> ï¼Œä»è€Œå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</p> <h3 id="ä¸»é”®ç´¢å¼•ä¸Šä¸èƒ½ä½¿ç”¨å¸¦æœ‰-null-çš„åˆ¤æ–­"><a href="#ä¸»é”®ç´¢å¼•ä¸Šä¸èƒ½ä½¿ç”¨å¸¦æœ‰-null-çš„åˆ¤æ–­" class="header-anchor">#</a> ä¸»é”®ç´¢å¼•ä¸Šä¸èƒ½ä½¿ç”¨å¸¦æœ‰ null çš„åˆ¤æ–­</h3> <p>åœ¨ä¸»é”®ä¸Šï¼Œä¸èƒ½åˆ¤æ–­ <code>is null</code> æˆ–è€… <code>is not null</code>, è¿™æ ·éƒ½ä¼šæ— æ³•ä½¿ç”¨åˆ°ç´¢å¼•ã€‚</p> <h3 id="ç´¢å¼•å­—æ®µä½¿ç”¨likeä¸ä»¥é€šé…ç¬¦å¼€å¤´"><a href="#ç´¢å¼•å­—æ®µä½¿ç”¨likeä¸ä»¥é€šé…ç¬¦å¼€å¤´" class="header-anchor">#</a> ç´¢å¼•å­—æ®µä½¿ç”¨likeä¸ä»¥é€šé…ç¬¦å¼€å¤´</h3> <p>å¯¹äºç´¢å¼•å­—æ®µï¼Œå¦‚æœä½¿ç”¨ <code>%</code>ã€<code>_</code> å¼€å¤´çš„è¯ï¼Œéƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼Œä»è€Œå˜ä¸ºå…¨è¡¨æ‰«æã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tdep <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'%rong'</span><span class="token punctuation">;</span>           
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tdep  <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tdep <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'rong%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>      <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tdep  <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> range <span class="token operator">|</span> username      <span class="token operator">|</span> username <span class="token operator">|</span> <span class="token number">303</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">100.00</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> condition <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+----------+---------+------+------+----------+-----------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>ç”±ç»“æœå¯çŸ¥ï¼Œ<code>like</code> ä»¥é€šé…ç¬¦ç»“æŸç›¸å½“äºèŒƒå›´æŸ¥æ‰¾ï¼Œç´¢å¼•ä¸ä¼šå¤±æ•ˆã€‚<strong style="color:#3EAF7C;">ä¸èŒƒå›´æ¡ä»¶ï¼ˆbettweenã€&lt;ã€&gt;ã€inç­‰ï¼‰ä¸åŒçš„æ˜¯ï¼šä¸ä¼šå¯¼è‡´å³è¾¹çš„ç´¢å¼•å¤±æ•ˆ</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- age å’Œ sex è¿˜æ˜¯æœ‰ä½¿ç”¨åˆ°ç´¢å¼•ï¼Œ ken_len çš„å€¼æ˜¯ 312</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'rong%'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">and</span> sex <span class="token operator">=</span>  <span class="token string">'1'</span><span class="token punctuation">;</span>   
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> range <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> condition <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+-----------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>å¦‚æœæƒ³è¦ <code>%aaa%</code> è¿™æ ·çš„å½¢å¼ï¼Œä¹Ÿè¦ä½¿ç”¨åˆ°ç´¢å¼•æ€ä¹ˆåŠå‘¢ï¼Ÿå¯ä»¥é€šè¿‡è¦†ç›–ç´¢å¼•å®ç°ã€‚</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> username <span class="token punctuation">,</span> age<span class="token punctuation">,</span>sex <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">index</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>          <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">312</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span><span class="token punctuation">;</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+---------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="ç´¢å¼•å­—æ®µæ˜¯å­—ç¬¦ä¸²éœ€è¦å¸¦å•å¼•å·"><a href="#ç´¢å¼•å­—æ®µæ˜¯å­—ç¬¦ä¸²éœ€è¦å¸¦å•å¼•å·" class="header-anchor">#</a> ç´¢å¼•å­—æ®µæ˜¯å­—ç¬¦ä¸²éœ€è¦å¸¦å•å¼•å·</h3> <p>ä¾‹å¦‚è¿™é‡Œçš„ <code>sex</code> å­—æ®µæ˜¯ <code>char</code> å€¼ï¼Œå¦‚æœåœ¨æŸ¥è¯¢æ—¶è®¾ç½® <code>sex=1</code> è€Œä¸æ˜¯ <code>sex='1'</code>ï¼Œå°±ä¼šå¯¼è‡´ <code>sex</code> å­—æ®µè¢«è¿›è¡Œéšå¼è½¬æ¢ï¼Œä»è€Œä½¿ç´¢å¼•å¤±æ•ˆ</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> username <span class="token punctuation">,</span> age<span class="token punctuation">,</span>sex <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username <span class="token operator">like</span> <span class="token string">'a%'</span> <span class="token operator">and</span> age <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">and</span> sex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span>  <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>              <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra                    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> range <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token number">308</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span>    <span class="token number">14.29</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span><span class="token punctuation">;</span> <span class="token keyword">Using</span> <span class="token keyword">index</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+-------+------------------+------------------+---------+------+------+----------+--------------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token keyword">warnings</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="ç´¢å¼•å­—æ®µä¸è¦ä½¿ç”¨or"><a href="#ç´¢å¼•å­—æ®µä¸è¦ä½¿ç”¨or" class="header-anchor">#</a> ç´¢å¼•å­—æ®µä¸è¦ä½¿ç”¨or</h3> <p>å¯¹ä¸åŒçš„ç´¢å¼•å­—æ®µä¹‹é—´ä½¿ç”¨ <code>or</code> ä¹Ÿä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'asd'</span> <span class="token operator">or</span> age<span class="token operator">=</span><span class="token number">23</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> select_type <span class="token operator">|</span> <span class="token keyword">table</span> <span class="token operator">|</span> partitions <span class="token operator">|</span> <span class="token keyword">type</span> <span class="token operator">|</span> possible_keys    <span class="token operator">|</span> <span class="token keyword">key</span>  <span class="token operator">|</span> key_len <span class="token operator">|</span> ref  <span class="token operator">|</span> <span class="token keyword">rows</span> <span class="token operator">|</span> filtered <span class="token operator">|</span> Extra       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------+---------+------+------+----------+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">SIMPLE</span>      <span class="token operator">|</span> tuser <span class="token operator">|</span> <span class="token boolean">NULL</span>       <span class="token operator">|</span> <span class="token keyword">ALL</span>  <span class="token operator">|</span> idx_name_age_sex <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>    <span class="token number">7</span> <span class="token operator">|</span>    <span class="token number">26.53</span> <span class="token operator">|</span> <span class="token keyword">Using</span> <span class="token keyword">where</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+-------+------------+------+------------------+------+---------+------+------+----------+-------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span><span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span class="token keyword">sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">æ³¨æ„</p> <p>ä¸åŒç‰ˆæœ¬ä¹‹é—´å¾—åˆ°çš„ç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼ï¼ï¼ï¼</p></div> <p>åœ¨ <code>mysql5.6</code> ç‰ˆæœ¬ï¼Œè¿™æ ·çš„è¯­å¥ä¹Ÿæ˜¯ç”¨ä¸äº†ç´¢å¼•çš„ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'asd'</span> <span class="token operator">or</span> username<span class="token operator">=</span><span class="token string">'zhangfei'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä½†æ˜¯å¯ä»¥é€šè¿‡ <code>union</code> ä¼˜åŒ–ï¼š</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">explain</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'asd'</span> <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> tuser <span class="token keyword">where</span> username<span class="token operator">=</span><span class="token string">'zhangfei'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">2020-3-17 9:00:53 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/database/RDB/MySQL_Learn/MySQLç´¢å¼•.html" class="prev">
        MySQL ç´¢å¼•
      </a></span> <span class="next"><a href="/database/RDB/MySQL_Learn/MySQLé”.html">
        MySQL é”
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.78cba7d9.js" defer></script><script src="/assets/js/2.b97de27f.js" defer></script><script src="/assets/js/11.fc6bddf2.js" defer></script>
  </body>
</html>
