<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL 基础语法 | HuangXinJian</title>
    <meta name="description" content="If you learn, learn deeply please!">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/H.png">
    
    <link rel="preload" href="/assets/css/0.styles.77838d5e.css" as="style"><link rel="preload" href="/assets/js/app.78cba7d9.js" as="script"><link rel="preload" href="/assets/js/2.b97de27f.js" as="script"><link rel="preload" href="/assets/js/7.f469350c.js" as="script"><link rel="prefetch" href="/assets/js/10.5a39f9cf.js"><link rel="prefetch" href="/assets/js/11.fc6bddf2.js"><link rel="prefetch" href="/assets/js/12.da1eaab3.js"><link rel="prefetch" href="/assets/js/13.3e791f4e.js"><link rel="prefetch" href="/assets/js/14.5953a388.js"><link rel="prefetch" href="/assets/js/15.b9e792e3.js"><link rel="prefetch" href="/assets/js/16.14be3228.js"><link rel="prefetch" href="/assets/js/17.d8c48abe.js"><link rel="prefetch" href="/assets/js/18.c1171d86.js"><link rel="prefetch" href="/assets/js/19.687638f3.js"><link rel="prefetch" href="/assets/js/20.dbb7c712.js"><link rel="prefetch" href="/assets/js/21.fcac9d7b.js"><link rel="prefetch" href="/assets/js/22.05c89a82.js"><link rel="prefetch" href="/assets/js/23.6f455ef9.js"><link rel="prefetch" href="/assets/js/24.a5f5dd42.js"><link rel="prefetch" href="/assets/js/25.ddacf5f1.js"><link rel="prefetch" href="/assets/js/26.1dbabccd.js"><link rel="prefetch" href="/assets/js/27.4d3ddddd.js"><link rel="prefetch" href="/assets/js/28.aca93b2e.js"><link rel="prefetch" href="/assets/js/29.4e592fcf.js"><link rel="prefetch" href="/assets/js/3.8c3b122e.js"><link rel="prefetch" href="/assets/js/30.07e05cf0.js"><link rel="prefetch" href="/assets/js/31.4bc393d7.js"><link rel="prefetch" href="/assets/js/32.5bed9ede.js"><link rel="prefetch" href="/assets/js/33.b1d61159.js"><link rel="prefetch" href="/assets/js/34.27c7f1f1.js"><link rel="prefetch" href="/assets/js/35.17c92a26.js"><link rel="prefetch" href="/assets/js/36.91a5ecf5.js"><link rel="prefetch" href="/assets/js/37.88c250af.js"><link rel="prefetch" href="/assets/js/38.6d72295b.js"><link rel="prefetch" href="/assets/js/39.0e585af1.js"><link rel="prefetch" href="/assets/js/4.ff5f2a88.js"><link rel="prefetch" href="/assets/js/40.80a7f1c2.js"><link rel="prefetch" href="/assets/js/41.defa3efa.js"><link rel="prefetch" href="/assets/js/42.70857ada.js"><link rel="prefetch" href="/assets/js/5.68065b24.js"><link rel="prefetch" href="/assets/js/6.bb2aa06c.js"><link rel="prefetch" href="/assets/js/8.37ca51cf.js"><link rel="prefetch" href="/assets/js/9.68f4fa83.js">
    <link rel="stylesheet" href="/assets/css/0.styles.77838d5e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">HuangXinJian</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJS" class="dropdown-title"><span class="title">NodeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nodejs/NodeJS基础/NodeJS介绍.html" class="nav-link">
  NodeJS 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/baseJava/Java 介绍.html" class="nav-link">
  Java 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><span class="title">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/distributed/frameworkHistory/架构演变历史.html" class="nav-link">
  分布式学习路线
</a></li><li class="dropdown-item"><!----> <a href="/distributed/registerCenter/" class="nav-link">
  注册中心
</a></li><li class="dropdown-item"><!----> <a href="/distributed/messageSystem/" class="nav-link">
  消息系统
</a></li><li class="dropdown-item"><!----> <a href="/distributed/internal/" class="nav-link">
  网络框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/RDB/MySQL_Learn/MySQL安装.html" class="nav-link">
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/huangxinjian/huangxinjian.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NodeJS" class="dropdown-title"><span class="title">NodeJS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nodejs/NodeJS基础/NodeJS介绍.html" class="nav-link">
  NodeJS 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/baseJava/Java 介绍.html" class="nav-link">
  Java 基础
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分布式" class="dropdown-title"><span class="title">分布式</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/distributed/frameworkHistory/架构演变历史.html" class="nav-link">
  分布式学习路线
</a></li><li class="dropdown-item"><!----> <a href="/distributed/registerCenter/" class="nav-link">
  注册中心
</a></li><li class="dropdown-item"><!----> <a href="/distributed/messageSystem/" class="nav-link">
  消息系统
</a></li><li class="dropdown-item"><!----> <a href="/distributed/internal/" class="nav-link">
  网络框架
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          关系型数据库
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/database/RDB/MySQL_Learn/MySQL安装.html" class="nav-link">
  MySQL
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/huangxinjian/huangxinjian.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>MySQL</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/database/RDB/MySQL_Learn/MySQL安装.html" class="sidebar-link">MySQL 单机安装</a></li><li><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html" class="active sidebar-link">MySQL 基础语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#数据定义语言-ddl" class="sidebar-link">数据定义语言 DDL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#数据库操作：database" class="sidebar-link">数据库操作：database</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#表操作-table" class="sidebar-link">表操作 table</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#数据操作语言-dml" class="sidebar-link">数据操作语言 DML</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#插入数据" class="sidebar-link">插入数据 ❓</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#更新数据" class="sidebar-link">更新数据</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#删除数据" class="sidebar-link">删除数据</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#数据查询语言-dql-最核心" class="sidebar-link">数据查询语言 DQL 🌟 最核心</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#简单查询" class="sidebar-link">简单查询</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#排序查询" class="sidebar-link">排序查询</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#聚合函数（组函数）" class="sidebar-link">聚合函数（组函数）</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#分组查询" class="sidebar-link">分组查询</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#分页查询" class="sidebar-link">分页查询</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#联合查询" class="sidebar-link">联合查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#一个-sql-的执行顺序" class="sidebar-link">一个 SQL 的执行顺序</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_1-from" class="sidebar-link">1. From</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_2-on-过滤" class="sidebar-link">2. ON 过滤</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_3-outer-join-添加外部列" class="sidebar-link">3. OUTER JOIN 添加外部列</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_4-where" class="sidebar-link">4. WHERE</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_5-group-by" class="sidebar-link">5. GROUP BY</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_6-having" class="sidebar-link">6. HAVING</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_7-select" class="sidebar-link">7. SELECT</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_8-distinct" class="sidebar-link">8. DISTINCT</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_9-order-by" class="sidebar-link">9. ORDER BY</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#_10-limit-mysql-特有" class="sidebar-link">10 LIMIT (MySQL 特有)</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#图示" class="sidebar-link">图示</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#多表之间的关系" class="sidebar-link">多表之间的关系</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#多表关联查询" class="sidebar-link">多表关联查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#多表查询" class="sidebar-link">多表查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#附录" class="sidebar-link">附录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#为什么-where-中不能使用聚合函数" class="sidebar-link">为什么 Where 中不能使用聚合函数</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#offset-过大如何解决" class="sidebar-link">Offset 过大如何解决</a></li><li class="sidebar-sub-header"><a href="/database/RDB/MySQL_Learn/MySQL基础语法.html#sql-约束" class="sidebar-link">SQL 约束</a></li></ul></li></ul></li><li><a href="/database/RDB/MySQL_Learn/MySQL架构.html" class="sidebar-link">MySQL 架构</a></li><li><a href="/database/RDB/MySQL_Learn/MySQL索引.html" class="sidebar-link">MySQL 索引</a></li><li><a href="/database/RDB/MySQL_Learn/MySQL索引详细分析.html" class="sidebar-link">MySQL 索引详细分析</a></li><li><a href="/database/RDB/MySQL_Learn/MySQL锁.html" class="sidebar-link">MySQL 锁</a></li><li><a href="/database/RDB/MySQL_Learn/MySQL事务.html" class="sidebar-link">MySQL 事务</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mysql-基础语法"><a href="#mysql-基础语法" class="header-anchor">#</a> MySQL 基础语法</h1> <p>SQL 语句一共分为四种类型：</p> <ul><li><code>Data Definition Language</code> 数据定义语言，简称为 DDL，用于数据库、表、表中列的创建和修改以及删除。</li> <li><code>Data Manipulation Language</code> 数据操作语言，简称为 DML，用于表记录的插入、修改、删除。</li> <li><code>Data Query Language</code> 数据查询语言，简称为 DQL，用于表记录的查询。</li> <li><code>Data Controller Language</code> 数据控制语言，简称为 DCL，用于定于数据库的权限级别。</li></ul> <h2 id="数据定义语言-ddl"><a href="#数据定义语言-ddl" class="header-anchor">#</a> 数据定义语言 DDL</h2> <p>DDL 具体分为两大类，一类是操作库，一类是操作表。关键字是 <code>create</code> 、<code>drop</code>、<code>alter</code>。</p> <h3 id="数据库操作：database"><a href="#数据库操作：database" class="header-anchor">#</a> 数据库操作：database</h3> <h4 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名称<span class="token punctuation">;</span>
<span class="token comment"># 创建数据库，判断不存在，在创建</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> 数据库名称<span class="token punctuation">;</span> 
<span class="token comment"># 创建数据库，并指定字符集</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名称 <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token operator">=</span> 字符集<span class="token punctuation">;</span>
<span class="token comment"># 判断是否存在和指定一个字符集</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> 数据库名称 <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token operator">=</span> 字符集
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="查询数据库"><a href="#查询数据库" class="header-anchor">#</a> 查询数据库</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 查询所有数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token comment"># 查询某个数据库的定义的信息:</span>
<span class="token keyword">show</span> <span class="token keyword">database</span> 数据库名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="修改数据库"><a href="#修改数据库" class="header-anchor">#</a> 修改数据库</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 修改数据库字符集</span>
<span class="token keyword">alter</span> <span class="token keyword">database</span> 数据库名称 <span class="token keyword">character</span> <span class="token keyword">set</span> 字符集
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> 数据库名称
<span class="token comment"># 删除数据库前判断存在</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> 数据库名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="使用数据库"><a href="#使用数据库" class="header-anchor">#</a> 使用数据库</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 查询当前正在使用的数据库</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 使用/切换 数据库</span>
<span class="token keyword">use</span> 数据库名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="表操作-table"><a href="#表操作-table" class="header-anchor">#</a> 表操作 table</h3> <p>想要在 MySQL 中操作表，首先需要了解的是 Mysql 的表中每一个列都有什么样的数据类型供选择</p> <h4 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h4> <p><strong>整数类型</strong></p> <p><img src="/mysql_img/1576113377888.png" alt="1576113377888"></p> <p><strong>小数类型</strong></p> <p><img src="/mysql_img/1576113417224.png" alt="1576113417224"></p> <p><strong>时间类型</strong></p> <p><img src="/mysql_img/1576113445701.png" alt="1576113445701"></p> <p><strong>文本、二进制类型</strong></p> <p><img src="/mysql_img/1576113465315.png" alt="1576113465315"></p> <h4 id="创建表"><a href="#创建表" class="header-anchor">#</a> 创建表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
   字段名 类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束<span class="token punctuation">,</span>
   字段名 类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="单表约束："><a href="#单表约束：" class="header-anchor">#</a> 单表约束：</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token operator">-</span> 主键约束：<span class="token keyword">primary</span> <span class="token keyword">key</span>
<span class="token operator">-</span> 唯一约束：<span class="token keyword">unique</span>
<span class="token operator">-</span> 非空约束：<span class="token operator">not</span> <span class="token boolean">null</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>主键约束 = 唯一约束 + 非空约束</p></blockquote> <h4 id="查询表"><a href="#查询表" class="header-anchor">#</a> 查询表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 查看数据库中的所有表</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token comment"># 查看表结构：</span>
<span class="token keyword">desc</span> 表名<span class="token punctuation">;</span>
<span class="token comment"># 查询表的字符集</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="删除表"><a href="#删除表" class="header-anchor">#</a> 删除表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
<span class="token comment"># 判断表是否存在</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="修改表"><a href="#修改表" class="header-anchor">#</a> 修改表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 修改表的名称</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">rename</span> <span class="token keyword">to</span> 新的表名
<span class="token comment"># 修改表的字符集</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">character</span> <span class="token keyword">set</span> 字符集<span class="token punctuation">;</span> 
<span class="token comment"># 添加列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 列名 数据类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束
<span class="token comment"># 修改列名</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change 旧列名 新列名 类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束<span class="token punctuation">;</span>
<span class="token comment"># 修改列的类型长度及约束.</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 列名 类型<span class="token punctuation">(</span>长度<span class="token punctuation">)</span> 约束<span class="token punctuation">;</span>
<span class="token comment"># 删除列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> 列名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="复制表"><a href="#复制表" class="header-anchor">#</a> 复制表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名称 <span class="token operator">like</span> 要复制的表名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="数据操作语言-dml"><a href="#数据操作语言-dml" class="header-anchor">#</a> 数据操作语言 DML</h2> <p>DML 语言是 SQL 中的核心语言之一，主要用来对数据的插入、更新、删除。<strong><strong>在涉及到高并发时，该部分语言的使用极其重要。</strong></strong></p> <p>该语言涉及到的关键字有 <code>insert</code>、<code>update</code>、<code>delete</code></p> <h3 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据 ❓</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 表 <span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span><span class="token punctuation">,</span>列名<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span>值<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 向表中插入某些列</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表 <span class="token keyword">values</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span>值<span class="token number">2</span><span class="token punctuation">,</span>值<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">--向表中插入所有列</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表 <span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span><span class="token punctuation">,</span>列名<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">select</span> <span class="token punctuation">(</span>列名<span class="token number">1</span><span class="token punctuation">,</span>列名<span class="token number">2</span><span class="token punctuation">,</span>列名<span class="token number">3.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">from</span> 表
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>这里存在疑问？？ 后两个带 values 吗</p></blockquote> <p>注意：</p> <ol><li>列名数与 values 后面的值的个数相等</li> <li>列的顺序与插入的值得顺序一致</li> <li>列名的类型与插入的值要一致.</li> <li>插入值得时候不能超过最大长度.</li> <li>除了数字类型，其他类型都需要使用引号（<strong>单双都可以</strong>） 引起来</li></ol> <h3 id="更新数据"><a href="#更新数据" class="header-anchor">#</a> 更新数据</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 不带条件，全表更新，慎用</span>
<span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 字段名<span class="token operator">=</span>值<span class="token punctuation">,</span>字段名<span class="token operator">=</span>值<span class="token punctuation">;</span>
<span class="token comment"># 带条件</span>
<span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 字段名<span class="token operator">=</span>值<span class="token punctuation">,</span>字段名<span class="token operator">=</span>值 <span class="token keyword">where</span> 条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>注意：</p> <ol><li>列名的类型与修改的值要一致.</li> <li>修改值得时候不能超过最大长度.</li> <li>值如果是字符串或者日期需要加 <code>’ ’</code></li></ol> <h3 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="删除全表的方法【面试】"><a href="#删除全表的方法【面试】" class="header-anchor">#</a> 删除全表的方法【面试】👍</h4> <ol><li><p>第一种办法，不推荐使用，因为有多少条记录纪要执行多少条sql</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> 表名；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>第二种办法，只执行两条sql，推荐使用</p></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">truncate</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>两种删除方式的区别：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token operator">-</span> <span class="token keyword">delete</span> ：一条一条删除，不清空<span class="token keyword">auto_increment</span>记录数。
<span class="token operator">-</span> <span class="token keyword">truncate</span> ：它会先删除表 <span class="token keyword">drop</span> <span class="token keyword">table</span><span class="token punctuation">,</span>然后再创建一张一模一样的表，重新建表，<span class="token keyword">auto_increment</span>将置为零，从新开始
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="数据查询语言-dql-最核心"><a href="#数据查询语言-dql-最核心" class="header-anchor">#</a> 数据查询语言 DQL 🌟 最核心</h2> <p>首先来看一下 DQL 语言的整体结构：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>
 	 <span class="token operator">&lt;</span> select_list <span class="token operator">&gt;</span>
<span class="token keyword">FROM</span>
 	 <span class="token operator">&lt;</span> left_table <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> join_type <span class="token operator">&gt;</span>
<span class="token keyword">JOIN</span> <span class="token operator">&lt;</span> right_table <span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span> join_condition <span class="token operator">&gt;</span>
<span class="token keyword">WHERE</span>
 	 <span class="token operator">&lt;</span> where_condition <span class="token operator">&gt;</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>
 	 <span class="token operator">&lt;</span> group_by_list <span class="token operator">&gt;</span>
<span class="token keyword">HAVING</span>
 	 <span class="token operator">&lt;</span> having_condition <span class="token operator">&gt;</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
 	 <span class="token operator">&lt;</span> order_by_condition <span class="token operator">&gt;</span>
<span class="token keyword">LIMIT</span> <span class="token operator">&lt;</span> limit_number <span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="简单查询"><a href="#简单查询" class="header-anchor">#</a> 简单查询</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> 列<span class="token number">1</span><span class="token punctuation">,</span>列<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> 表名

<span class="token comment"># 别名查询，使用的as关键字，as可以省略的.</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> product <span class="token keyword">as</span> p<span class="token punctuation">;</span>
<span class="token keyword">select</span> pname <span class="token keyword">as</span> pn <span class="token keyword">from</span> product<span class="token punctuation">;</span> 

<span class="token comment"># 去重查询，注意，distinct 是把 select 后的所有列当做一个整体来去重的</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> username<span class="token punctuation">,</span>address <span class="token keyword">from</span> product<span class="token punctuation">;</span>

<span class="token comment"># 运算查询, 查询结果是表达式：将所有商品的价格+10元进行显示.</span>
<span class="token keyword">select</span> pname<span class="token punctuation">,</span> price<span class="token operator">+</span><span class="token number">10</span> <span class="token keyword">from</span> product<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h3> <p>条件查询的关键字是 <code>where</code> ,在该字句后接表中的属性列以及一些运算符。</p> <h4 id="运算符"><a href="#运算符" class="header-anchor">#</a> 运算符</h4> <p><img src="/mysql_img/1576119313535.png" alt="1576119313535"></p> <p><img src="/mysql_img/1576119340796.png" alt="1576119340796"></p> <h3 id="排序查询"><a href="#排序查询" class="header-anchor">#</a> 排序查询</h3> <p>关键字</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">order</span> <span class="token keyword">by</span> 排序字段<span class="token number">1</span> 排序方式<span class="token number">1</span><span class="token punctuation">,</span> 排序字段<span class="token number">2</span> 排序方式<span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="排序方式"><a href="#排序方式" class="header-anchor">#</a> 排序方式</h4> <ul><li>升序： ASC 这是默认的</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>select * from 表名 order by 列名 ASC;  //升序
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>如果排序字段1相同，才会再比较排序字段2</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>select * from 表名 order by 列名1 ASC,列名2 排序方式2; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>降序: DESC</li></ul> <h3 id="聚合函数（组函数）"><a href="#聚合函数（组函数）" class="header-anchor">#</a> 聚合函数（组函数）</h3> <blockquote><p>将 一列数据作为一个整体，进行纵向的计算。 比如算 数学成绩的 平均分。</p></blockquote> <p>特点：<strong>只对单列进行操作</strong></p> <p>常用的聚合函数有：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 求某一列的和</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 求某一列的平均值</span>
<span class="token function">avg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 求某一列的最大值</span>
<span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 求某一列的最小值</span>
<span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 求某一列的元素个数</span>
<span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><strong>注意，所有的聚合函数默认都会排除  NULL 值</strong> ， 可以通过 <code>IFNULL(列名,默认值)</code> 来选择为 <code>NULL</code> 的列。</p> <h3 id="分组查询"><a href="#分组查询" class="header-anchor">#</a> 分组查询</h3> <p>分组关键字</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">group</span> <span class="token keyword">by</span> 分组字段
<span class="token keyword">having</span> 条件<span class="token punctuation">(</span>聚合函数<span class="token punctuation">)</span>  <span class="token comment"># having 相当于是对分组后的数据进行进一步的筛选</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意事项</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token number">1.</span> <span class="token keyword">select</span> 语句中的列（非聚合函数列），必须出现在 <span class="token keyword">group</span> <span class="token keyword">by</span> 子句中
<span class="token number">1.</span> <span class="token keyword">group</span> <span class="token keyword">by</span> 子句中的列，不一定要出现在 <span class="token keyword">select</span> 语句中
<span class="token number">1.</span> 聚合函数只能出现 <span class="token keyword">select</span> 语句中或者 <span class="token keyword">having</span> 语句中，一定不能出现在 <span class="token keyword">where</span> 语句中。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="where-和-having-的区别"><a href="#where-和-having-的区别" class="header-anchor">#</a> where 和 having 的区别</h4> <ol><li>where 在分组前进行限定，如果不满足这个条件，不参与分组</li> <li>having 在分组之后进行限定，如果不满足条件，则不会查询出来</li> <li>where 后不可以跟聚合函数的判断，而having可以跟聚合函数的判断</li></ol> <h3 id="分页查询"><a href="#分页查询" class="header-anchor">#</a> 分页查询</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token keyword">table</span> <span class="token keyword">LIMIT</span> <span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> <span class="token keyword">rows</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>其中：</p> <p><code>offset</code>：偏移量
<code>rows</code> ：每页多少行记录。</p> <p>另外 <code>LIMIT</code> 关键字不是 <code>SQL92</code> 标准提出的关键字，它是 <code>MySQL</code> 独有的语法。<strong>通过该关键字，MySQL 实现了物理分页。</strong></p> <h4 id="分页类型"><a href="#分页类型" class="header-anchor">#</a> 分页类型</h4> <p>分页分为逻辑分页和物理分页：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token operator">-</span> 逻辑分页：将数据库中的数据查询到内存之后再进行分页。
<span class="token operator">-</span> 物理分页：通过 <span class="token keyword">LIMIT</span> 关键字，直接在数据库中进行分页，最终返回的数据，只是分页后的数据
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="联合查询"><a href="#联合查询" class="header-anchor">#</a> 联合查询</h3> <p>联合查询是通过两条 SQL 语句结合 <code>union</code> 或者 <code>unionall</code> 实现的。</p> <ul><li><code>union</code> 集合的并集（不包含重复记录）</li> <li><code>unionall</code> 集合的并集（包含重复记录）</li></ul> <h2 id="一个-sql-的执行顺序"><a href="#一个-sql-的执行顺序" class="header-anchor">#</a> 一个 SQL 的执行顺序</h2> <p>上面有介绍到一个 SQL 查询的整体结构，该结构在 MySQL 中的执行顺序如下：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 行过滤</span>
<span class="token keyword">FROM</span> <span class="token operator">&lt;</span>left_table<span class="token operator">&gt;</span>
<span class="token keyword">ON</span> <span class="token operator">&lt;</span>join_condition<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>join_type<span class="token operator">&gt;</span> <span class="token keyword">JOIN</span> <span class="token operator">&lt;</span>right_table<span class="token operator">&gt;</span>  第二步和第三步会循环执行
<span class="token keyword">WHERE</span> <span class="token operator">&lt;</span>where_condition<span class="token operator">&gt;</span>  第四步会循环执行，多个条件的执行顺序是从左往右的。
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>group_by_list<span class="token operator">&gt;</span>
<span class="token keyword">HAVING</span> <span class="token operator">&lt;</span>having_condition<span class="token operator">&gt;</span>
<span class="token comment">-- 列过滤</span>
<span class="token keyword">SELECT</span> 分组之后才会执行<span class="token keyword">SELECT</span>
<span class="token keyword">DISTINCT</span> <span class="token operator">&lt;</span>select_list<span class="token operator">&gt;</span>
<span class="token comment">-- 排序</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span>order_by_condition<span class="token operator">&gt;</span>
<span class="token comment">-- MySQL附加</span>
<span class="token keyword">LIMIT</span> <span class="token operator">&lt;</span>limit_number<span class="token operator">&gt;</span> 前<span class="token number">9</span>步都是SQL92标准语法。<span class="token keyword">limit</span>是MySQL的独有语法。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_1-from"><a href="#_1-from" class="header-anchor">#</a> 1. From</h3> <p>MySQL 首先会对 <code>&lt;left_table&gt;</code> 和 <code>&lt;right_table&gt;</code> 计算笛卡尔积，产生 <code>虚表 VT1</code>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> product<span class="token punctuation">,</span>category<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----+-----------------+-------+-------+------+----+--------------+</span>
<span class="token operator">|</span> pid <span class="token operator">|</span> pname      <span class="token operator">|</span> price <span class="token operator">|</span> pdate <span class="token operator">|</span> cid <span class="token operator">|</span> id <span class="token operator">|</span> cname    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+-----------------+-------+-------+------+----+--------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 泰国大榴莲   <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 泰国大榴莲   <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 泰国大榴莲   <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 新疆切糕    <span class="token operator">|</span>   <span class="token number">68</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 新疆切糕    <span class="token operator">|</span>   <span class="token number">68</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 新疆切糕    <span class="token operator">|</span>   <span class="token number">68</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 十三香     <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 十三香     <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 十三香     <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">20</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">20</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">20</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> iPhone手机   <span class="token operator">|</span>  <span class="token number">800</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> iPhone手机   <span class="token operator">|</span>  <span class="token number">800</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> iPhone手机   <span class="token operator">|</span>  <span class="token number">800</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+-----------------+-------+-------+------+----+--------------+</span>
<span class="token number">21</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="_2-on-过滤"><a href="#_2-on-过滤" class="header-anchor">#</a> 2. ON 过滤</h3> <p>对 <code>虚表 VT1</code> 进行 <code>on</code> 过滤，过滤后的记录将被记录在 <code>虚表 VT2</code> 中。</p> <h3 id="_3-outer-join-添加外部列"><a href="#_3-outer-join-添加外部列" class="header-anchor">#</a> 3. OUTER JOIN 添加外部列</h3> <p><code>ON</code> 条件结合 <code>JOIN</code> 会将<strong>保留表【主表，如果是 left 就是左表，right 就是右表】中未匹配的行</strong> 作为外部行添加到 <code>虚表 VT2</code> 中，产生 <code>虚拟表 VT3</code> 。</p> <blockquote><p>如果 FROM 字句中包含两个以上的表的话，会将上一次 join 得到的结果 VT3 和下一次的表重复执行 1~3 这三个步骤，一直到处理完所有的表为止。</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 演示左连接</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> product a <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> category b <span class="token keyword">on</span> a<span class="token punctuation">.</span>cid<span class="token operator">=</span>b<span class="token punctuation">.</span>id<span class="token punctuation">;</span> <span class="token comment"># 以左表</span>
数据为准
<span class="token operator">+</span><span class="token comment">-----+-----------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span> pid <span class="token operator">|</span> pname      <span class="token operator">|</span> price <span class="token operator">|</span> pdate <span class="token operator">|</span> cid <span class="token operator">|</span> id  <span class="token operator">|</span> cname    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+-----------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 泰国大榴莲   <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 新疆切糕    <span class="token operator">|</span>   <span class="token number">68</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">4</span> <span class="token operator">|</span> 十三香     <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7</span> <span class="token operator">|</span> iPhone手机   <span class="token operator">|</span>  <span class="token number">800</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">30</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+-----------------+-------+-------+------+------+--------------+</span>
<span class="token number">7</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 演示右连接</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> product a <span class="token keyword">right</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> category b <span class="token keyword">on</span> a<span class="token punctuation">.</span>cid<span class="token operator">=</span>b<span class="token punctuation">.</span>id<span class="token punctuation">;</span> <span class="token comment">#以右表</span>
数据为准
<span class="token operator">+</span><span class="token comment">------+-----------------+-------+-------+------+----+--------------+</span>
<span class="token operator">|</span> pid <span class="token operator">|</span> pname      <span class="token operator">|</span> price <span class="token operator">|</span> pdate <span class="token operator">|</span> cid <span class="token operator">|</span> id <span class="token operator">|</span> cname    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------------+-------+-------+------+----+--------------+</span>
<span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> 泰国大榴莲   <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">3</span> <span class="token operator">|</span> 新疆切糕    <span class="token operator">|</span>   <span class="token number">68</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">4</span> <span class="token operator">|</span> 十三香     <span class="token operator">|</span>   <span class="token number">10</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>   <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣    <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>      <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 国内服装   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------------+-------+-------+------+----+--------------+</span>
<span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_4-where"><a href="#_4-where" class="header-anchor">#</a> 4. WHERE</h3> <p>将通过外连接得到的 <code>虚拟表 VT3</code> 进行 <code>WHERE</code> 条件过滤，符合条件的记录将会被记录到 <code>虚拟表 VT4</code> 中。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> product a <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> category b <span class="token keyword">on</span> a<span class="token punctuation">.</span>cid<span class="token operator">=</span>b<span class="token punctuation">.</span>id <span class="token keyword">where</span> a<span class="token punctuation">.</span>pname<span class="token operator">=</span><span class="token string">'泰国大枣'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span> pid <span class="token operator">|</span> pname    <span class="token operator">|</span> price <span class="token operator">|</span> pdate <span class="token operator">|</span> cid <span class="token operator">|</span> id  <span class="token operator">|</span> cname    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">6</span> <span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>   <span class="token number">98</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>  <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="与on的区别"><a href="#与on的区别" class="header-anchor">#</a> 与ON的区别</h4> <ul><li>如果有外部列，ON针对过滤的是关联表，主表（保留表）会返回所有的列；</li> <li>如果没有添加外部列，两者的效果是一样的；</li></ul> <blockquote><p>此时因为分组，不能使用聚合运算；也不能使用SELECT中创建的别名；</p> <p>[where不能使用聚合运算的原因](#为什么 Where 中不能使用聚合函数)</p></blockquote> <h4 id="where条件解析顺序"><a href="#where条件解析顺序" class="header-anchor">#</a> WHERE条件解析顺序</h4> <ol><li>MySQL ：从左往右去执行 WHERE 条件的。</li> <li>Oracle ：从右往左去执行 WHERE 条件的。</li></ol> <h4 id="应用"><a href="#应用" class="header-anchor">#</a> 应用</h4> <ul><li>对主表的过滤应该放在WHERE；</li> <li>对于关联表，先条件查询后连接则用ON，先连接后条件查询则用WHERE；</li></ul> <h3 id="_5-group-by"><a href="#_5-group-by" class="header-anchor">#</a> 5. GROUP BY</h3> <p>通过 <code>虚拟表 VT4</code> 确定了最终的结果集，就可以对结果集进行分组了，分组后的结果将会存到 <code>虚拟表 VT5</code> 中。</p> <p>注意：
其后处理过程的语句，如SELECT,HAVING，所用到的列必须包含在GROUP BY中。对于没有出现的，得
用聚合函数；
原因：
GROUP BY改变了对表的引用，将其转换为新的引用方式，能够对其进行下一级逻辑操作的列会减少；
我的理解是：
根据分组字段，将具有相同分组字段的记录归并成一条记录，因为每一个分组只能返回一条记录，除非
是被过滤掉了，而不在分组字段里面的字段可能会有多个值，多个值是无法放进一条记录的，所以必须
通过聚合函数将这些具有多值的列转换成单值</p> <h3 id="_6-having"><a href="#_6-having" class="header-anchor">#</a> 6. HAVING</h3> <p>对 虚拟表VT5 应用having过滤，只有符合的记录才会被 插入到 虚拟表VT6 中。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> product a <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> category b <span class="token keyword">on</span> a<span class="token punctuation">.</span>cid <span class="token operator">=</span> b<span class="token punctuation">.</span>id <span class="token keyword">where</span> a<span class="token punctuation">.</span>pname<span class="token operator">=</span><span class="token string">'泰国大枣'</span> <span class="token keyword">group</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span>price  <span class="token keyword">having</span> b<span class="token punctuation">.</span>id <span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span> pid <span class="token operator">|</span> pname    <span class="token operator">|</span> price <span class="token operator">|</span> pdate <span class="token operator">|</span> cid <span class="token operator">|</span> id  <span class="token operator">|</span> cname    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_7-select"><a href="#_7-select" class="header-anchor">#</a> 7. SELECT</h3> <p>此时针对 <code>虚拟表 VT6</code> 的数据进行列过滤，生成 <code>虚拟表 VT7 - j1</code></p> <h3 id="_8-distinct"><a href="#_8-distinct" class="header-anchor">#</a> 8. DISTINCT</h3> <p>找到 <code>虚拟表 VT7</code> 中的重复列，并删除，生成 <code>VT7 -j2</code>。</p> <p>如果在查询中指定了DISTINCT子句，则会创建一张内存临时表（如果内存放不下，就需要存放在硬盘
了）。这张临时表的表结构和上一步产生的 <code>虚拟表VT7 - J1</code> 是一样的，<strong>不同的是对进行DISTINCT操作的列增
加了一个唯一索引</strong>，以此来除重复数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  <span class="token keyword">select</span> <span class="token keyword">distinct</span> a<span class="token punctuation">.</span>pname <span class="token keyword">from</span> product a <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> category b <span class="token keyword">on</span> a<span class="token punctuation">.</span>cid <span class="token operator">=</span> b<span class="token punctuation">.</span>id <span class="token keyword">where</span> a<span class="token punctuation">.</span>pname<span class="token operator">=</span><span class="token string">'泰国大枣'</span> <span class="token keyword">group</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span>price <span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> pname    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_9-order-by"><a href="#_9-order-by" class="header-anchor">#</a> 9. ORDER BY</h3> <p>从 <code>VT7-J2</code> 中的表中，根据 <code>ORDER BY</code> 子句的条件对结果进行排序，生成 <code>VT8</code> 表。</p> <blockquote><p>唯一能使用 select 别名的地方，因此这里 select 已经执行完毕了</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span>  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> product a <span class="token keyword">left</span> <span class="token keyword">outer</span> <span class="token keyword">join</span> category b <span class="token keyword">on</span> a<span class="token punctuation">.</span>cid<span class="token operator">=</span>b<span class="token punctuation">.</span>id <span class="token keyword">where</span> a<span class="token punctuation">.</span>pname<span class="token operator">=</span><span class="token string">'泰国大枣'</span> <span class="token keyword">group</span> <span class="token keyword">by</span> a<span class="token punctuation">.</span>price  <span class="token keyword">having</span> b<span class="token punctuation">.</span>id <span class="token operator">&lt;=</span><span class="token number">2</span>  <span class="token keyword">order</span> <span class="token keyword">by</span> b<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span> pid <span class="token operator">|</span> pname    <span class="token operator">|</span> price <span class="token operator">|</span> pdate <span class="token operator">|</span> cid <span class="token operator">|</span> id  <span class="token operator">|</span> cname    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>   <span class="token number">38</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> 国外食品   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">5</span> <span class="token operator">|</span> 泰国大枣   <span class="token operator">|</span>   <span class="token number">20</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span>   <span class="token number">2</span> <span class="token operator">|</span> 国内食品   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----+--------------+-------+-------+------+------+--------------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_10-limit-mysql-特有"><a href="#_10-limit-mysql-特有" class="header-anchor">#</a> 10 LIMIT (MySQL 特有)</h3> <p>LIMIT子句从上一步得到的 <code>VT8</code> 虚拟表 中选出从指定位置开始的指定行数据。</p> <blockquote><p>注意，当偏移量很大时效率是很低的，[解决方案](# offset 过大如何解决)</p></blockquote> <h3 id="图示"><a href="#图示" class="header-anchor">#</a> 图示</h3> <p><img src="/mysql_img/1576136837433.png" alt="1576136837433"></p> <h2 id="多表之间的关系"><a href="#多表之间的关系" class="header-anchor">#</a> 多表之间的关系</h2> <p>表与表之间的关系，说的就是表与表之间数据的关系。一共分为三种：</p> <ul><li>一对一</li> <li>一对多</li> <li>多对多</li></ul> <p>想要实现表之间的关系，就得通过 <code>外键约束</code> 来实现</p> <blockquote><p>附录中有讲什么是 SQL 约束。</p></blockquote> <h2 id="多表关联查询"><a href="#多表关联查询" class="header-anchor">#</a> 多表关联查询</h2> <p>JOIN 按照功能大致分为如下三类：</p> <ul><li>CROSS JOIN （交叉连接）</li> <li>INNER JOIN （内连接或等值连接）。</li> <li>OUTER JOIN （外连接）</li></ul> <h3 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h3> <p>文档：<a href="http://note.youdao.com/noteshare?id=7db7f4caa14c26ad3d9b19fb09c9c438&amp;sub=7E311711389841FE8A8A0C5CE483C7B2" target="_blank" rel="noopener noreferrer">多表查询.md<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="附录"><a href="#附录" class="header-anchor">#</a> 附录</h2> <h3 id="为什么-where-中不能使用聚合函数"><a href="#为什么-where-中不能使用聚合函数" class="header-anchor">#</a> 为什么 Where 中不能使用聚合函数</h3> <p>因为 Where 的作用是对数据行进行过滤的，从而确定最终结果集。而聚合函数也叫列函数，它们都是<strong>基于整列数据进行计算</strong>的。</p> <p>也就是说，聚集函数要对全列数据时行计算，因而使用它的前提是：<strong>结果集已经确定</strong>！</p> <p>而where子句还处于“确定”结果集的过程中，因而不能使用聚集函数。</p> <p><strong>因此聚合函数是针对结果集进行的，但是where条件并不是在查询出结果集之后运行，所以主函数放在where语句中，会出现错误，</strong></p> <p>而having不一样，having是针对结果集做筛选的，所以我门一般把组函数放在having中，用having来代替where，having一般跟在group by后</p> <h3 id="offset-过大如何解决"><a href="#offset-过大如何解决" class="header-anchor">#</a> Offset 过大如何解决</h3> <ol><li><p>采用子查询的方式优化 ，在子查询里先从索引获取到最大id，然后倒序排，再取N行结果集</p></li> <li><p>采用 <code>INNER JOIN</code> 优化 ，JOIN子句里也优先从索引获取ID列表，然后直接关联查询获得最终结果</p></li></ol> <p>​</p> <h3 id="sql-约束"><a href="#sql-约束" class="header-anchor">#</a> SQL 约束</h3> <p>在 SQL 中，约束分为：</p> <ol><li>主键约束 <code>primary key</code></li> <li>非空约束 <code>not null</code></li> <li>唯一约束 <code>unique</code></li> <li>外键约束 <code>foreign key</code></li></ol> <h4 id="主键约束"><a href="#主键约束" class="header-anchor">#</a> 主键约束</h4> <ol><li>主键约束代表了<strong>非空且唯一</strong></li> <li>一张表只能存在 <strong>一个字段</strong> 为主键</li> <li>主键就是表中记录的唯一标识</li></ol> <h5 id="添加主键约束和主键自增长"><a href="#添加主键约束和主键自增长" class="header-anchor">#</a> 添加主键约束和主键自增长</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时添加主键约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span>  <span class="token comment">-- 给 id 添加主键约束</span>
<span class="token punctuation">)</span>

<span class="token comment"># 添加主键自增长功能，注意，自增长的数据只跟上一条数据有关系，会读取上一条记录的值进行加一。</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>
    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span> <span class="token comment">-- 给 id 添加主键约束</span>
<span class="token punctuation">)</span>


<span class="token comment"># 表创建完成后再添加唯一约束（此时表中该字段不能存在重复数据）</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>  

<span class="token comment"># 表创建完成后再添加自增长</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> stu <span class="token keyword">modify</span> id <span class="token keyword">int</span> <span class="token keyword">auto_increment</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="删除主键约束"><a href="#删除主键约束" class="header-anchor">#</a> 删除主键约束</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 错误方式 alter table 表名 modify id int;  </span>
<span class="token comment"># 删除主键  </span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>

<span class="token comment"># 删除自动增长 </span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> stu <span class="token keyword">modify</span> id <span class="token keyword">int</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="非空约束"><a href="#非空约束" class="header-anchor">#</a> 非空约束</h4> <p>非空约束表示该值是非空的。</p> <h5 id="添加非空约束"><a href="#添加非空约束" class="header-anchor">#</a> 添加非空约束</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时添加约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>  <span class="token comment">-- name 是非空的</span>
<span class="token punctuation">)</span>

<span class="token comment"># 表创建完成后再添加约束</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="删除非空约束"><a href="#删除非空约束" class="header-anchor">#</a> 删除非空约束</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 删除name的非空约束</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="唯一约束"><a href="#唯一约束" class="header-anchor">#</a> 唯一约束</h4> <p>表示值是唯一的，不能重复，<strong>注意，但是如果没有设置非空，值还是可以为NULL，而且可以多个NULL，NULL不会对 unique生效。</strong></p> <h5 id="添加唯一约束"><a href="#添加唯一约束" class="header-anchor">#</a> 添加唯一约束</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时添加唯一约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span>
    phone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span>  <span class="token comment">-- 添加了唯一约束</span>
<span class="token punctuation">)</span>

<span class="token comment"># 表创建完成后再添加唯一约束（此时表中该字段不能存在重复数据）</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> phone <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h5 id="删除唯一约束"><a href="#删除唯一约束" class="header-anchor">#</a> 删除唯一约束</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">#删除phone的唯一约束</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">index</span> phone<span class="token punctuation">;</span>  <span class="token comment">//删除索引  </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="外键约束"><a href="#外键约束" class="header-anchor">#</a> 外键约束</h4> <h5 id="创建外键约束"><a href="#创建外键约束" class="header-anchor">#</a> 创建外键约束</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表时添加外键约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名 <span class="token punctuation">(</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    外键列  
    <span class="token keyword">constraint</span> 外键名称 <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>外键列的名称<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名称<span class="token punctuation">(</span>主表列名称<span class="token punctuation">)</span>
<span class="token punctuation">)</span>
<span class="token comment"># 创建表之后添加外键</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">constraint</span> 外键名称 <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>外键列的名称<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名称<span class="token punctuation">(</span>主表列名称<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="删除外键"><a href="#删除外键" class="header-anchor">#</a> 删除外键</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> 外键名称
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="级联操作"><a href="#级联操作" class="header-anchor">#</a> 级联操作</h4> <h5 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">constraint</span> 外键名称 <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>外键列的名称<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名称<span class="token punctuation">(</span>主表列名称<span class="token punctuation">)</span>
<span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="级联更新"><a href="#级联更新" class="header-anchor">#</a> 级联更新</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h5 id="级联删除"><a href="#级联删除" class="header-anchor">#</a> 级联删除</h5> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2020-3-17 9:00:53 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/database/RDB/MySQL_Learn/MySQL安装.html" class="prev">
        MySQL 单机安装
      </a></span> <span class="next"><a href="/database/RDB/MySQL_Learn/MySQL架构.html">
        MySQL 架构
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.78cba7d9.js" defer></script><script src="/assets/js/2.b97de27f.js" defer></script><script src="/assets/js/7.f469350c.js" defer></script>
  </body>
</html>
